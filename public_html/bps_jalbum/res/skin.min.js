/* 
	Turtle skin by Laszlo Molnar
	(C) 2011
*/
var DEBUG=!1,UNDEF="undefined",OBJECT="object",NOLINK="javascript:void(0)",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash";String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.startsWith=function(b){return 0===this.indexOf(b)};String.prototype.endsWith=function(b){return this.substring(this.length-b.length)===b};
String.prototype.getExt=function(){var b=this.lastIndexOf(".");return 0>=b||b>=this.length-1?"":this.substring(b+1).toLowerCase()};var htmlregex=[[/<br>/gi,"\n"],[/\&amp;/gi,"&"],[/\&lt;/gi,"<"],[/\&gt;/gi,">"],[/\&(m|n)dash;/gi,"-"],[/\&apos;/gi,"'"],[/\&quot;/gi,'"']];String.prototype.cleanupHTML=function(){for(var b=this,m=htmlregex.length-1;0<=m;m--)b=b.replace(htmlregex[m][0],htmlregex[m][1]);return b};String.prototype.stripHTML=function(){return this.replace(/<\/?[^>]+>/gi,"")};
String.prototype.stripQuote=function(){return this.replace(/\"/gi,"&quot;")};String.prototype.appendSep=function(b,m){return(this.length?this+(m||" &middot; "):"")+b};String.prototype.rgb2hex=function(){if("#"===this.charAt(0))return this;for(var b,m=this.match(/\d+/g),u="",j=0;j<m.length&&3>j;j++)b=parseInt(m[j]).toString(16),u+=(2>b.length?"0":"")+b;return"#"+u};
String.prototype.template=function(b){if(!b)return this;for(var m=this,u=0;u<b.length;u++)m=m.replace(RegExp("\\{"+u+"\\}","gi"),b[u]);return m};Math.minMax=function(b,m,u){return $.isNumeric(m)?m<b?b:m>u?u:m:b};var _logel,_logover=!1,_lastlog,_lastcnt=1;
log=function(b){DEBUG&&!_logover&&(_logel||(_logel=$('<div id="log" style="position:fixed;left:0;top:0;width:200px;bottom:0;overflow:auto;padding:10px;background-color:rgba(0,0,0,0.5);color:#fff;font-size:15px;z-index:99999"></div>').hover(function(){_logover=!0},function(){_logover=!1}).appendTo("body")),b===_lastlog?_logel.children(":first").empty().html(_lastlog+" ("+ ++_lastcnt+")"):($('<div style="height:2em;overflow:hidden;">'+b+"</div>").prependTo(_logel),_lastlog=b,_lastcnt=1))};
checkFlash=function(b){var m=navigator,u=[1,0,0],j,b=b?b.split("."):[0,0,0];if(typeof m.plugins!=UNDEF&&typeof m.plugins[SHOCKWAVE_FLASH]==OBJECT){if((j=m.plugins[SHOCKWAVE_FLASH].description)&&!(typeof m.mimeTypes!=UNDEF&&m.mimeTypes[FLASH_MIME_TYPE]&&!m.mimeTypes[FLASH_MIME_TYPE].enabledPlugin))j=j.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),u[0]=parseInt(j.replace(/^(.*)\..*$/,"$1"),10),u[1]=parseInt(j.replace(/^.*\.(.*)\s.*$/,"$1"),10),u[2]=/[a-zA-Z]/.test(j)?parseInt(j.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),
10):0}else if(typeof window.ActiveXObject!=UNDEF)try{var x=new ActiveXObject(SHOCKWAVE_FLASH_AX);if(x&&typeof x.GetVariable!=UNDEF&&(j=x.GetVariable("$version")))j=j.split(" ")[1].split(","),u[0]=parseInt(j[0],10),u[1]=parseInt(j[1],10),u[2]=parseInt(j[2],10)}catch(H){}return u[0]>b[0]||u[0]==b[0]&&u[1]>b[1]||u[0]==b[0]&&u[1]==b[1]&&u[2]>=b[2]};
typeof Search!==UNDEF&&(Search.start=function(b){var b=$(b).find("input[type=search]").val().trim(),m=$("<div>",{"class":"searchresults"}),u=0,j,x,H,a,f,c;if(Search.data&&$.isArray(Search.data)&&Search.data.length&&b&&!(2>b.length)){m.append($("<h4>",{html:Search.text.title+" &quot;<b>"+b+"</b>&quot;"}));b=b.toLowerCase();for(j=0;j<Search.data.length;j++)for(x=0;x<Search.data[j][1].length;x++)-1!=Search.data[j][1][x].toLowerCase().indexOf(b)&&(c=Search.data[j][1][x].split(Search.sep),f=Search.rootPath&&
"."!==Search.rootPath?Search.rootPath+"/":"",a=f+(Search.data[j][0]?Search.data[j][0]+"/":""),H=$("<a>",{href:a+Search.pageName+(c[0].length?"#"+c[0].replace(/%/g,"%25"):"")}).appendTo(m),H.append($("<aside>").append($("<img>",{src:c[0].length?c[0].toLowerCase().endsWith(".jpg")?a+"thumbs/"+c[0]:f+"res/unknown.png":a+Search.folderThumb}))),H.append($("<h5>",{text:c[1]})),H.append($("<p>",{text:c[2]})),u++);u||m.append($("<p>",{text:Search.text.notFound}));m.alertBox([{t:Search.text.close}],{width:400});
return!1}});
(function(b){b.fn.logEvents=function(a){var f=a||"mousedown mouseup mouseover mouseout mousewheel dragstart click blur focus, load unload reset submit change abort cut copy paste selection drag drop orientationchange touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend";return this.each(function(){b(this).on(f,function(a){"log"!==a.target.id&&log(a.type+' <span style="padding:0 4px;font-size:0.8em;background-color:#000;border-radius:4px;"><b>'+a.target.nodeName.toLowerCase()+"</b>"+
(a.target.id?":"+a.target.id:"")+"</span>"+(a.relatedTarget?' <span style="padding:0 4px;font-size:0.8em;background-color:#800;border-radius:4px;"><b>'+a.relatedTarget.nodeName.toLowerCase()+"</b>"+(a.relatedTarget.id?":"+a.relatedTarget.id:"")+"</span>":""));return!0})})};b.fn.trackCss=function(a,f,c){var c=c||20,i=new Date;return this.each(function(){var h=b(this),g=function(a){var b=new Date-i;log(b+"&nbsp;::&nbsp;"+a+" = "+h.css(a));b>f&&clearInterval(k)},k=setInterval(function(){if(b.isArray(a))for(var c=
0;c<a.length;c++)g(a[c]);else g(a)},c)})};b.fn.readData=function(a,f){if(null==a||null==f)return this;var f=f.split(","),c,i=f.length,h;return this.each(function(){for(c=0;c<i;c++)if(null!=(h=b(this).data(f[c])))a[f[c]]=h})};b.extend(b.support,{orientation:"orientation"in window,touch:"ontouchend"in document,cssTransitions:"WebKitTransitionEvent"in window,cssTable:!b.browser.msie||8<=b.browser.version,cssFilter:b.browser.msie&&8>=b.browser.version,flash:checkFlash("9.0.0")});b.extend(jQuery.easing,
{easeOutBack:function(a,b,c,i,h,g){null==g&&(g=1.70158);return i*((b=b/h-1)*b*((g+1)*b+g)+1)+c},easeOutCubic:function(a,b,c,i,h){return i*((b=b/h-1)*b*b+1)+c}});b.fn.showin=function(){return this.each(function(){b(this).css("display","inline-block")})};b.fn.getDim=function(){var a=b(this).eq(0),f={width:a.width(),height:a.height()};if((0===f.width||0===f.height)&&"none"===a.css("display")){var c=a.css("position"),i=a.css("left");a.css({position:"absolute",left:"-10000px",display:"block"});f.width=
a.width();f.height=a.height();a.css({display:"none",position:c,left:i})}return f};var m=["DOMMouseScroll","mousewheel"];if(b.event.fixHooks)for(var u=m.length;u;)b.event.fixHooks[m[--u]]=b.event.mouseHooks;b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=m.length;a;)this.addEventListener(m[--a],j,!1);else this.onmousewheel=j},teardown:function(){if(this.removeEventListener)for(var a=m.length;a;)this.removeEventListener(m[--a],j,!1);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(a){return a?
this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}});var j=function(a){var f=a||window.event,c=[].slice.call(arguments,1),i=0,h=0,g=0,a=b.event.fix(f);a.type="mousewheel";f.wheelDelta?i=f.wheelDelta/120:f.detail&&(i=-f.detail/3);g=i;void 0!==f.axis&&f.axis===f.HORIZONTAL_AXIS&&(g=0,h=-1*i);void 0!==f.wheelDeltaY&&(g=f.wheelDeltaY/120);void 0!==f.wheelDeltaX&&(h=-1*f.wheelDeltaX/120);c.unshift(a,i,h,g);return(b.event.dispatch||b.event.handle).apply(this,
c)},x=function(a,b,c){if(1<arguments.length&&/^(string|number|boolean)$/.test(typeof b)){var i=new Date;i.setTime(i.getTime()+36E5*("number"!==typeof c?1:c));document.cookie=encodeURIComponent(a)+"="+(""+b)+"; expires="+i.toGMTString()+"; path=/";return b}if(a)for(var a=a+"=",i=document.cookie.split(";"),h,g=0;g<i.length;g++)if(h=i[g].trim(),0===h.indexOf(a))return h=h.substring(a.length),/^(true|yes)$/.test(h)?!0:/^(false|no)$/.test(h)?!1:/^([\d.]+)$/.test(h)?parseFloat(h):h;return null};(function(){function a(a){function c(a){var f=
RegExp(b.map(a,encodeURIComponent).join("|"),"ig");return function(a){return a.replace(f,decodeURIComponent)}}a=b.extend({unescape:!1},a||{});f.encoder=function(a){return!0===a?function(a){return a}:"string"==typeof a&&(a=c(a.split("")))||"function"==typeof a?function(b){return a(encodeURIComponent(b))}:encodeURIComponent}(a.unescape)}var f={put:function(a,b){(b||window).location.hash=this.encoder(a)},get:function(a){a=(a||window).location.hash.replace(/^#/,"");try{return b.browser.mozilla?a:decodeURIComponent(a)}catch(c){return a}},
encoder:encodeURIComponent},c={id:"__jQuery_history",init:function(){var a='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';b("body").prepend(a);return this},_document:function(){return b("#"+this.id)[0].contentWindow.document},put:function(a){var b=this._document();b.open();b.close();f.put(a,b)},get:function(){return f.get(this._document())}},i={base:{callback:void 0,type:void 0,check:function(){},load:function(){},init:function(b,c){a(c);h.callback=b;h._options=c;h._init()},
_init:function(){},_options:{}},timer:{_appState:void 0,_init:function(){var a=f.get();h._appState=a;h.callback(a);setInterval(h.check,100)},check:function(){var a=f.get();a!=h._appState&&(h._appState=a,h.callback(a))},load:function(a){a!=h._appState&&(f.put(a),h._appState=a,h.callback(a))}},iframeTimer:{_appState:void 0,_init:function(){var a=f.get();h._appState=a;c.init().put(a);h.callback(a);setInterval(h.check,100)},check:function(){var a=c.get(),b=f.get();b!=a&&(b==h._appState?(h._appState=a,
f.put(a),h.callback(a)):(h._appState=b,c.put(b),h.callback(b)))},load:function(a){a!=h._appState&&(f.put(a),c.put(a),h._appState=a,h.callback(a))}},hashchangeEvent:{_init:function(){h.callback(f.get());b(window).on("hashchange",h.check)},check:function(){h.callback(f.get())},load:function(a){f.put(a)}}},h=b.extend({},i.base);h.type=b.browser.msie&&(8>b.browser.version||8>document.documentMode)?"iframeTimer":"onhashchange"in window?"hashchangeEvent":"timer";b.extend(h,i[h.type]);b.history=h})();b.fn.addScroll=
function(a){a=b.extend({},b.fn.addScroll.defaults,a);return this.each(function(){var f,c=b(this),i=b(this).parent(),h,g,k,n,r,p,v,C,w=0,I,O,m,j,u,x;c.css({position:"absolute",width:i.width-20});i.css({overflow:"hidden"});"absolute"!==i.css("position")&&i.css({position:"relative"});h=b("<div>",{"class":a.upbtn}).appendTo(i);g=b("<div>",{"class":a.dnbtn}).appendTo(i);k=b("<div>",{"class":a.scbar}).appendTo(i);n=b("<div>").appendTo(k);r=h.add(g).add(k);r.hide();var y=function(){return c.position().top},
E=function(a){return Math.round((k.height()-4)*-(null==a?y():a)/p)+2},J=function(){return Math.max(Math.round((k.height()-4)*v/p),a.dragMinSize)},K=function(b){null==b&&(b=y());h.css({opacity:b?1:a.disabledOpacity});g.css({opacity:b===v-p?a.disabledOpacity:1})},L=function(){p=c.height();v=i.height();p<=v?(c.css({top:0}),r.hide()):(c.position().top<v-p&&c.css({top:v-p}),n.css({top:E(),height:J()}),r.show(),K())},F=function(b){clearInterval(C);v>=p||(b=Math.minMax(v-p,b,0),n.stop(!0,!0).animate({top:E(b)},
a.speed,a.effect),c.stop(!0,!0).animate({top:b},a.speed,a.effect,function(){K(b)}))};h.click(function(){F(y()+v);return!1});g.click(function(){F(y()-v);return!1});k.click(function(a){a.pageY<n.offset().top?F(y()+v):a.pageY>n.offset().top+n.height()&&F(y()-v);return!1});a.enableMouseWheel&&c.mousewheel(function(b,c){c&&F(y()+a.wheelIncr*(0>c?-1:1));return!1});var M=function(a){n.css({top:Math.minMax(2,Math.round(a.pageY-n.data("my")),k.height()-n.height()-2)});c.css({top:Math.minMax(v-p,-Math.round((n.position().top-
2)*p/(k.height()-4)),0)});K();return!1},H=function(){b(document).off("mousemove",M).off("mouseup",H);return!1};n.on("mousedown",function(a){b(this).data("my",Math.round(a.pageY)-b(this).position().top);b(document).on({mousemove:M,mouseup:H});return!1});var R=function(a){return w=a.touches&&0<a.touches.length?a.touches[0].clientY:a.clientY?a.clientY:w},aa=function(){u+=Math.round(j/20);var a=m+u;0<a||a<x?clearInterval(C):(c.css({top:a}),n.css({top:E(),height:J()}),j*=0.8,10>Math.abs(j)&&(j=0,clearInterval(C)))},
G=function(a){if(O){if(a=R(a)-O)c.data("dragOn",!0),c.css({top:Math.minMax(x,I+a,0)}),n.css({top:E(),height:J()})}else O=R(a);return!1},S=function(a){m=y();var a=R(a)-O,f=(new Date).getTime()-tT;j=1E3*a/f;C=setInterval(aa,50);b.support.touch?this.ontouchend=this.ontouchmove=null:b(document).off({mousemove:G,mouseup:S});setTimeout(function(){c.data("dragOn",!1)},20);return 4>Math.abs(a)&&300>f},T=function(a){if(v>=p||("touchstart"===a.type||"touchmove"===a.type)&&(!a.touches||1<a.touches.length||c.is(":animated")))return!0;
clearInterval(C);te=a;I=y();O=R(a);tT=(new Date).getTime();u=0;x=v-p;if(b.support.touch)return b(a.target).closest("a").focus(),this.ontouchmove=G,this.ontouchend=S,!0;b(document).on({mousemove:G,mouseup:S});return!1};if(b.support.touch)c[0].ontouchstart=T;else c.on("mousedown",T);b(window).resize(function(){clearTimeout(f);f=setTimeout(L,50)});r.add(c).on("selectstart",function(){return!1});f=setTimeout(L,10);c.attr("role","scroll").data("dragOn",!1).on("adjust",L);(b.isFunction(a.enableKeyboard)||
a.enableKeyboard)&&b(document).keydown(function(c){if(document.activeElement&&"INPUT"===document.activeElement.nodeName||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard())return!0;switch(c?c.keyCode:window.event.keyCode){case 33:return F(y()+v),!1;case 34:return F(y()-v),!1}return!0})})};b.fn.addScroll.defaults={upbtn:"scrup",dnbtn:"scrdn",scbar:"scrbar",dragMinSize:10,speed:250,effect:"easeOutBack",disabledOpacity:0.3,wheelIncr:50,enableKeyboard:!0,enableMouseWheel:!0};b.fn.scrollThumbs=function(a){a=
b.extend({},b.fn.scrollThumbs.defaults,a);return this.each(function(){var f=b(this),c=b(this).parent(),i=0,h,g,k,n,r,p,v,C,w=b("<div>",{"class":a.scleft}).insertAfter(c),I=b("<div>",{"class":a.scright}).insertAfter(c),O=function(b){b=null==b?f.position().left:b;w.css({opacity:0>b?1:a.disabledOpacity});I.css({opacity:c.width()<b+f.width()?1:a.disabledOpacity})},m=function(h){var g=c.width(),i=f.width();g&&i&&!(g>=i)&&b.isNumeric(h)&&(0<h?h=0:h<g-i&&(h=g-i),O(h),f.stop(!0,!1).animate({left:h},a.speed,
a.effect))};w.click(function(){m(f.position().left+c.width());return!1});I.click(function(){m(f.position().left-c.width());return!1});f.find("a").on("setactive",function(){var h=b(this).parent()===f?b(this):b(this).parent(),g=h.position().left,h=h.outerWidth(!0),i=Math.round(h*a.headRoom),w=f.position().left,v=c.width();f.find("a.active").removeClass("active");b(this).addClass("active");if(!(v>f.width())){if(g>v-h-i-w)w=Math.max(v-h-i-g,v-f.width());else if(g<-w+i)w=-g+i;else return;m(w)}});a.enableMouseWheel&&
f.mousewheel(function(a,b){b&&m(f.position().left+c.width()*(0>b?-1:1));return!1});O();var j=function(a){return i=a.touches&&0<a.touches.length?a.touches[0].clientX:a.clientX?a.clientX:i},u=function(){p+=Math.round(r/20);var a=n+p;0<a||a<v?clearInterval(C):(f.css({left:a}),r*=0.8,10>Math.abs(r)&&(r=0,clearInterval(C)))},x=function(a){if(g){if(a=j(a)-g)f.data("dragOn",!0),f.css({left:Math.minMax(v,h+a,0)})}else g=j(a);return!1},y=function(a){n=f.position().left;var a=j(a)-g,c=(new Date).getTime()-
k;r=1E3*a/c;C=setInterval(u,50);b.support.touch?this.ontouchend=this.ontouchmove=null:b(document).off({mousemove:x,mouseup:y});setTimeout(function(){f.data("dragOn",!1)},20);return 4>Math.abs(a)&&300>c},E=function(a){if(("touchstart"===a.type||"touchmove"===a.type)&&(!a.touches||1<a.touches.length||f.is(":animated")))return!0;clearInterval(C);te=a;h=f.position().left;g=j(a);k=(new Date).getTime();p=0;v=c.width()-f.width();if(b.support.touch)return b(a.target).closest("a").focus(),this.ontouchmove=
x,this.ontouchend=y,!0;b(document).on({mousemove:x,mouseup:y});return!1};if(b.support.touch)f[0].ontouchstart=E;else f.on("mousedown",E);f.attr("role","scroll").data("dragOn",!1);f.add(w).add(I).on("selectstart",function(a){a.preventDefault();return!1})})};b.fn.scrollThumbs.defaults={scleft:"scleft",scright:"scright",speed:1500,incr:100,effect:"easeOutBack",headRoom:0.67,disabledOpacity:0.3,enableMouseWheel:!0};b.fn.swipe=function(a,f){return this.each(function(){var c=b(this),i=0,h=0,g=0,k,n,r,p=
function(a){return i=a.touches&&0<a.touches.length?a.touches[0].clientX:a.clientX?a.clientX:i},v=function(a){h?c.css({left:p(a)-h+k}):h=p(a);return!1},C=function(){return!1},w=function(i){g=c.position().left;i=p(i)-h;b.support.touch?this.ontouchend=this.ontouchmove=null:b(document).off("mousemove",v).off("mouseup click",w);40<Math.abs(i)?(r=1E3*i/((new Date).getTime()-n),c.animate({left:g+Math.round(r/2)},500,"easeOutCubic"),0>i?b.isFunction(a)&&a.call():b.isFunction(f)&&f.call()):(c.animate({left:k},
200),c.trigger("click"));return!1},I=function(a){if(("touchstart"===a.type||"touchmove"===a.type)&&(!a.touches||1<a.touches.length||c.is(":animated")))return!0;clearInterval(void 0);k=c.position().left;h=p(a);n=(new Date).getTime();if(b.support.touch)return this.ontouchmove=v,this.ontouchend=w,!0;c.off("click");c.click(C);b(document).on({mousemove:v,mouseup:w});a.cancelBubble=!0;return!1};if(b.support.touch)this.ontouchstart=I;else c.on("dragstart",I);c.on("dragcancel",function(){c.stop(!0,!1).animate({left:k},
200);return!1});c.on("unswipe",function(){b.support.touch?this.ontouchstart=this.ontouchend=this.ontouchmove=null:(b.isFunction(c.noClick)&&c.off(C),b.isFunction(c.dragStart)&&c.off(I),b(document).off("mousemove",v).off("mouseup",w))})})};b.fn.alignTo=function(a,f){f=b.extend({},b.fn.alignTo.defaults,f);return b(this).each(function(){var c=a.offset(),i=b(this).outerWidth(),h=b(this).outerHeight(),g=Math.round(c.left+f.toPos.h*a.outerWidth()/2+(f.toPos.h-1)*f.gap);ry=Math.round(c.top+f.toPos.v*a.outerHeight()/
2+(f.toPos.v-1)*f.gap);l=Math.round(g-f.pos.h*i/2);t=Math.round(ry-f.pos.v*h/2);0>t?2!==f.toPos.v&&(t=Math.round(c.top+a.outerHeight()+f.gap)):t+h>b(window).height()&&0!==f.toPos.v&&(t=Math.round(c.top-h-f.gap));0>l?l=0:l+i>b(window).width()&&(l=b(window).width()-i);b(this).css({position:"absolute",left:l,top:t})})};b.fn.alignTo.defaults={gap:5,pos:{h:1,v:2},toPos:{h:1,v:0}};b.fn.addHint=function(a,f){var f=b.extend({},b.fn.addHint.defaults,f),c=function(){var a=b("#"+f.id);a.length||(a=b("<div>",
{"class":f.id,id:f.id}).hide().appendTo("body"));return a};return this.each(function(){var i=b(this),h=a||i.attr("title"),g,k=!1,n=!1,r=!(h&&h.jquery),p;if(h&&h.length){var v=function(){r?(p=c(),p.empty().html(h)):p=h.show();p.off("mouseover",a);p.off("mouseout",v);var a=function(){g=clearTimeout(g);k=!0;p.stop(!0,!0).css({opacity:1}).show()},v=function(){n||(g=clearTimeout(g),k=!1,w())};p.on("mouseover",a);p.on("mouseout",v);p.find("input").focus(function(){n=!0;a()}).blur(function(){n=!1});p.stop(!0,
!0).alignTo(i);p.css({opacity:0}).show().animate({opacity:1},200);b.support.touch?g=setTimeout(w,f.stay):k=!0},C=function(){k=!1;g=clearTimeout(g);w()},w=function(){!k&&p&&p.length&&p.stop(!0,!1).animate({opacity:0},200,function(){b(this).hide()})};h.jquery?h.addClass(f.id):i.removeAttr("title");i.on(b.support.touch?{touchstart:v}:{"focus mouseenter":v,"blur mouseleave":C})}})};b.fn.addHint.defaults={id:"hint",stay:3E3};b.fn.popupBox=function(a){a=b.extend({},b.fn.popupBox.defaults,a);b("#"+a.id).remove();
var f,c=b("<div>",{id:a.id}).appendTo("body"),i=b("<div>",{"class":"panel"}).appendTo(c);i.css({width:a.width}).append(this);var h=function(){c.fadeOut(250,function(){b(this).remove()})};c.fadeIn(250,function(){f=setTimeout(h,a.length)});i.css({marginTop:Math.max(Math.round(0.4*(b(window).height()-i.outerHeight())),0)}).hover(function(){f=clearTimeout(f);b(this).stop(!0,!1).css("opacity",1)},function(){f=setTimeout(h,a.length)});return this};b.fn.popupBox.defaults={id:"modal",width:200,length:500};
b.fn.alertBox=function(a,f){b.isArray(a)||(f=a,a=null);f=b.extend({},b.fn.alertBox.defaults,f);b("#"+f.id).remove();var c=b("<div>",{id:f.id}).appendTo("body"),i=b("<div>",{"class":"panel"}).appendTo(c),h,g;i.append(this);i.append(b("<a>",{"class":"close",href:NOLINK,text:" "}).click(function(){n();return!1}));a&&(h=b("<div>",{"class":"buttons"}).appendTo(i));i.css({width:f.width});var k=function(a){if(document.activeElement&&"input"===document.activeElement.nodeName||b.isFunction(f.enableKeyboard)&&
!f.enableKeyboard())return!0;var c=a?a.keyCode:window.event.keyCode;if(27===a)n();else if(h){var a=h.find("a.active"),i=g.index(a);switch(c){case 13:case 10:if(b.isFunction(a[0].handler))return a[0].handler.call(),n(),!1;case 39:return r((i+1)%g.length),!1;case 37:return r(i?i-1:g.length-1),!1}}return!0},n=function(){b(document).off("keydown",k);c.fadeOut(250,function(){b(this).remove()})},r=function(a){g.each(function(c){b(this).toggleClass("active",c===a)})};if(a&&a.length){for(var p,v=0;v<a.length;v++)v&&
h.append(" "),p=b("<a>",{href:NOLINK}).appendTo(h),p.html(a[v].t),b.isFunction(a[v].h)&&(p[0].handler=a[v].h),p.click(function(){null!=this.handler&&this.handler.call();n();return!1});g=h.children("a");g.last().addClass("active")}(b.isFunction(f.enableKeyboard)||f.enableKeyboard)&&b(document).keydown(k);c.fadeIn(250);i.css({marginTop:Math.max(Math.round(0.4*(b(window).height()-i.outerHeight())),0)});return this};b.fn.alertBox.defaults={id:"modal",width:420,enableKeyboard:!0};b.fn.equalHeight=function(){var a,
f,c=0,i=0,h;return 2>(h=b(this).length)?this:this.each(function(g){a=b(this);a.offset().top===c?(f=f?f.add(a):a,i=Math.max(i,a.height()),g===h-1&&i&&f.height(i)):(f&&i&&f.height(i),f=a,i=a.height(),c=a.offset().top)})};b.fn.shareIt=function(a){var a=b.extend({},b.fn.shareIt.defaults,a),f=encodeURIComponent(a.useHash?window.location.href:window.location.href.split("#")[0]),c=encodeURIComponent(b("meta[name=title]").attr("content")||b("title").text()),i=encodeURIComponent(a.callTxt);encodeURIComponent(b("link[rel=img_src]").attr("href"));
return this.each(function(){var h=b(this);"a"===this.nodeName&&h.attr("href",NOLINK);var g=b("<div>",{"class":a.id}).hide();if(location.protocol.startsWith("file:")&&!DEBUG)g.html(a.localWarning);else{a.facebookLike&&g.append('<div class="likebtn"><iframe src="http://www.facebook.com/plugins/like.php?href='+f+"&amp;layout=button_count&amp;show_faces=false&amp;width=110&amp;action=like&amp;font=arial&amp;colorscheme="+a.likeBtnTheme+'&amp;height=20" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:110px; height:20px;" allowTransparency="true"></iframe></div>');
a.twitterTweet&&g.append('<div class="likebtn"><iframe allowtransparency="true" frameborder="0" scrolling="no" src="http://platform.twitter.com/widgets/tweet_button.html?url='+f+"&text="+c+'" style="width:55px; height:20px;"></iframe></div>');if(a.googlePlus&&gapi&&!a.useHash){var k=b('<div class="g-plusone likebtn" data-size="medium" data-annotation="inline" data-href="'+f+'" data-width="110"></div>').appendTo(g);gapi.plusone.render(k[0])}a.tumblrBtn&&g.append('<div class="likebtn" id="tumblr"><a href="http://www.tumblr.com/share/photo?source='+
f+"&caption="+c+'" title="Share on Tumblr" style="display:inline-block; text-indent:-9999px; overflow:hidden; width:81px; height:20px; background:url(http://platform.tumblr.com/v1/share_1.png) top left no-repeat transparent;">Tumblr</div>');a.facebook&&g.append('<a href="http://www.facebook.com/sharer.php?u='+f+"&t="+c+'" class="facebook">Facebook</a>');a.twitter&&g.append('<a href="http://twitter.com/home?status='+i+": "+f+'" class="twitter">Twitter</a>');a.digg&&g.append('<a href="http://digg.com/submit?url='+
f+'" class="digg">Digg</a>');a.delicious&&g.append('<a href="http://delicious.com/save?url='+f+"&title="+c+'&v=5" class="delicious">Delicious</a>');a.myspace&&g.append('<a href="http://www.myspace.com/index.cfm?fuseaction=postto&t='+c+"&u="+f+'&l=3" class="myspace">MySpace</a>');a.stumbleupon&&g.append('<a href="http://www.stumbleupon.com/submit?url='+f+"&title="+c+'" class="stumbleupon">StumbleUpon</a>');a.reddit&&g.append('<a href="http://www.reddit.com/submit?url='+f+'" class="reddit">Reddit</a>');
g.children("a").attr("target","_blank");a.email&&g.append('<a href="mailto:?subject='+i+"&body="+c+"%0D%0A"+f+'" class="email">Email</a>')}h.addHint(g.appendTo("body")).on("destroy",function(){g.remove()})})};b.fn.shareIt.defaults={id:"shares",useHash:!0,likeBtnTheme:"light",facebookLike:!0,twitterTweet:!0,googlePlus:!0,tumblrBtn:!0,facebook:!0,twitter:!0,digg:!0,delicious:!0,myspace:!0,stumbleupon:!0,reddit:!0,email:!0,callTxt:"Found this page",localWarning:"Can't share local albums. Please upload your album first!"};
b.fn.addPlayer=function(a){var a=b.extend({},b.fn.addPlayer.defaults,a),f={flashVideo:".flv.3gp.3g2",video:".mp4.mov.f4v",html5Video:".ogv.webm",qtVideo:".qt.mpg.mpeg.mpe",wmVideo:".avi.wmv.asf.asx.wvx.mkv",audio:".mp3.aac.m4a",html5audio:".ogg.wav.ram.rm"},c=0,i=a.resPath?a.resPath+"/":"",h=function(a){var b="",c;for(c in a)b+='<param name="'+c+'" value="'+a[c]+'">';return b},g=function(a){var c=b(a.target);c&&(b.browser.msie?(c.hide(),function(){if(4==c.readyState){if(c){for(var a in c)"function"===
typeof c[a]&&(c[a]=null);c.remove()}}else setTimeout(arguments.callee,10)}()):c.remove())},k=function(f,g,w,k,p,n){var r="media"+c++,m=a.swf===b.fn.addPlayer.defaults.swf?24:0;f.addClass("flplayer").css({width:w,height:k+m});g="netstreambasepath="+encodeURIComponent(window.location.href.split("#")[0])+"&id="+r+"&file="+encodeURIComponent(g)+"&image="+encodeURIComponent(p)+(n&&n.length?"&folder="+encodeURIComponent(n):"")+"&autostart="+a.auto+"&loop="+a.loop+"&screencolor="+encodeURIComponent(a.bgcolor)+
"&controlbar.position=bottom";r='<object id="'+r+'" name="'+r+'" width="100%" height="100%" bgcolor="'+a.bgcolor+'" tabindex="0" ';r=b.browser.msie?r+'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">'+h({movie:i+a.swf}):r+('type="application/x-shockwave-flash" data="'+i+a.swf+'">');r+=h({allowfullscreen:!0,allowscriptaccess:"always",seamlesstabbing:!0,wmode:"opaque",flashvars:g});return b(r).appendTo(f)},n=function(f,h,i,g){var k="em"+c++;f.addClass("emplayer");return b('<embed class="otherplayer" id="'+
k+'" src="'+h+'" autostart="'+a.auto+'" loop="'+a.loop+'" width="'+i+'" height="'+g+'">').appendTo(f)},r=function(f,h,i,g,k,p){if((p=p!==UNDEF&&p)&&!Modernizr.audio||!p&&!Modernizr.video)return n(f,h,i,g);f.addClass("h5player").css({width:i,height:g+m});var r="ht"+c++,m=30,f=b(p?"<audio>":"<video>",{id:r,src:h,width:i,height:g,controls:!0,preload:"auto",poster:k,autoplay:a.auto,loop:a.loop}).appendTo(f);if(b.isFunction(a.complete))f.on("ended",a.complete);return f},p=function(f,i,g,p){var k="wm"+
c++;f.addClass("wmplayer").css({width:g,height:p+64});g='<object id="'+k+'" width="'+g+'" height="'+(p+64)+'" '+(b.browser.msie?'classid="CLSID:6BF52A52-394A-11D3-B153-00C04F79FAA6">':'type="application/x-ms-wmp" data="'+i+'">');g+=h({URL:i,SendPlayStateChangeEvents:!0,AutoStart:a.auto,StretchToFit:a.fit});b.browser.msie||(g+="<a></a>");el=b(g).appendTo(f);if(b.isFunction(a.complete))el.on("playStateChange",function(){a.complete.call(this)});return el};return this.each(function(){var i=b(this),m=
null;i.readData(a,"file,folder,width,height,poster");if(a.file){var w;a:{w=a.file.getExt();if(w.length)for(var j in f)if(0<=f[j].indexOf(w)){w=j;break a}w=null}switch(w){case "flashVideo":if(!b.support.flash){i.append(a.flashInstall);break}case "video":if(b.support.flash){m=k(i,a.file,a.width,a.height,a.poster);break}case "html5Video":m=r(i,a.file,a.width,a.height,a.poster);break;case "qtVideo":m=a.file;w=a.width;j=a.height;var u="qt"+c++;i.addClass("qtplayer").css({width:w,height:j+16});w='<object id="'+
u+'" width="'+w+'" height="'+(j+16)+'" '+(b.browser.msie?'classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0">':'type="video/quicktime" data="'+m+'">');w+=h({src:m,autoplay:a.auto,scale:a.fit?"tofit":"1",enablejavascript:!0,postdomevents:!0});i=b(w).appendTo(i);if(b.isFunction(a.complete))i.on("qt_ended",a.complete);m=i;break;case "wmVideo":m=p(i,a.file,a.width,a.height);break;case "audio":if(b.support.flash){m=k(i,a.file,a.width,
a.height,a.poster,a.folder);break}case "html5audio":m=r(i,a.file,a.width,a.height,a.poster,!0);break;default:m=n(i,a.file,a.width,a.height)}m.on("destroy",g)}})};b.fn.addPlayer.defaults={complete:null,swf:"player.swf",width:640,height:480,bgcolor:"#000000",auto:!1,loop:!1,fit:!0,poster:"",folder:"",flashInstall:'<a href="http://get.adobe.com/flashplayer/">Get Adobe Flash Player!</a>'};b.fn.centerThis=function(a){a=b.extend({},b.fn.centerThis.defaults,a);return this.each(function(){var f=b(this),c=
f.find(a.selector),i,h,g,k,n,r=a.marginLeft+a.padding;i=a.marginRight+a.padding;var p=a.marginTop+a.padding;k=a.marginBottom+a.padding;h=c.data("ow");g=c.data("oh");if(!h||!g)h=c.width(),g=c.height();(bw=c.data("bw"))||c.data("bw",bw=parseInt(c.css("border-top-width"))||0);i=(f.width()||b("body").width())-2*bw-r-i;f=(f.height()||b("body").height())-2*bw-p-k;if("IMG"===c[0].nodeName&&a.fit&&(h>i||g>f||a.enlarge))k=Math.min(i/h,f/g),h=Math.round(h*k),g=Math.round(g*k);k=Math.round((i-h)/2)+r;n=Math.round((f-
g)/2)+p;if(a.animate){if(a.preScale&&1!==a.preScale){var m=h*a.preScale,j=g*a.preScale;c.css({left:Math.round((i-m)/2)+r,top:Math.round((f-j)/2)+p,width:Math.round(m),height:Math.round(j)})}else a.init&&c.css({left:k,top:n});c.animate({left:k,top:n,width:h,height:g},{duration:a.speed,easing:a.effect,complete:a.complete})}else c.css({left:k,top:n,width:h,height:g}),b.isFunction(a.complete)&&a.complete.call(this)})};b.fn.centerThis.defaults={selector:".main",speed:500,fit:!0,enlarge:!0,marginTop:0,
marginBottom:0,marginLeft:0,marginRight:0,padding:0,init:!1,animate:!1,effect:"swing",complete:null};b.fn.setupShop=function(a){var a=b.extend({},b.fn.setupShop.defaults,a),f;b.fn.addInput=function(a,c,f,k){var n;return this.each(function(){n=b("<input>",{type:f||"text"}).appendTo(b(this));a&&(n.attr("name",a),n.addClass(a));c&&n.val(c);k&&n.prop(k,k)})};b.fn.addSelect=function(a,c,g){return!a.length?this:this.each(function(){var k=b(this),k=b("<select>").appendTo(k);for(f=0;f<a.length;f++)k.append(b("<option>",
{val:a[f].val,text:a[f].key+" ("+c+" "+a[f].val+")"}));b.isFunction(g)&&k.change(g)})};var c=function(a){var a=a.split("::"),b,c=[];for(f=0;f<a.length;f++)b=a[f].split("="),1<b.length&&c.push({key:b[0],val:b[1]});return c};return this.each(function(){var f=b(this),h,g;f.readData(a,"gateway,id,currency,handling,options,file");if(!(null==a.id||null==a.options||null==a.file)){id="paypal"==a.gateway?{form:"paypal",seller:"business",currency:"currency_code",title:"item_name",select:"item_number",price:"amount",
copies:"add",shipprice:"shipping",handling:"handling_cart"}:{form:"google_checkout",currency:"item_currency_1",title:"item_name_1",select:"item_description_1",price:"item_price_1",copies:"item_quantity_1",shipmethod:"ship_method_name_1",shipprice:"ship_method_price_1",shipcurrency:"ship_method_currency_1"};var k=c(a.options);a.id=a.id.replace("|","@");var n=function(){var a=h.length?h.children("select").eq(0):!1;if(a&&a.length){var b,a=a.val().split("+");q=h.children("[name=copies]").val()||1;(b=
h.children("[name=total]"))&&b.val((a[0]*q).toFixed(2));(b=g.children("[name="+id.price+"]"))&&b.val(a[0]);(b=g.children("[name="+id.copies+"]"))&&b.val(q);if(b=g.children("[name="+id.shipprice+"]"))b.val(1<a.length?a[1]:0);(b=g.children("[name="+id.select+"]"))&&b.val(h.find("option:selected").text())}};h=b("<form>",{name:"shopping",method:"post"}).appendTo(f);h.addSelect(k,a.currency,n);h.append("x").addInput("copies",1);h.append("=").addInput("total",k[0].val.split("+")[0],"text","readonly");h.children("[name=copies]").css({width:"3em"}).change(n);
h.children("[name=total]").css({width:"5em"});h.append(a.currency);"paypal"===a.gateway?(n=k[0].val.split("+"),g=b("<form>",{name:id.form,target:a.target,action:"https://www.paypal.com/cgi-bin/webscr/",method:"post"}).appendTo(f),g.addInput("cmd","_cart","hidden"),g.addInput(id.copies,1,"hidden"),g.addInput(id.seller,a.id,"hidden"),g.addInput(id.price,n[0],"hidden"),g.addInput(id.currency,a.currency,"hidden"),g.addInput(id.shipprice,n[1]&&b.isNumeric(n[1])?n[1]:0,"hidden"),null!=a.handling&&b.isNumeric(a.handling)&&
g.addInput(id.handling,a.handling,"hidden"),g.addInput(id.title,a.file,"hidden"),g.addInput(id.select,k[0].key,"hidden"),g.append(b("<input>",{id:"shopAdd",type:"image",name:"submit",src:"https://www.paypal.com/en_US/i/btn/btn_cart_SM.gif",alt:"Add to Cart"})),f=b("<form>",{"class":"view",name:"paypalview",target:a.target,action:"https://www.paypal.com/cgi-bin/webscr/",method:"post"}).appendTo(f),f.addInput("cmd","_cart","hidden"),f.addInput("display",1,"hidden"),f.addInput(id.seller,a.id,"hidden"),
f.append(b("<input>",{id:"shopView",type:"image",name:"submit",src:"https://www.paypal.com/en_US/i/btn/btn_viewcart_SM.gif",alt:"View Cart"}))):"google"===a.gateway&&(n=a.id.match(/(\d+)/)[0],g=b("<form>",{name:id.form,target:a.target,action:"https://checkout.google.com/cws/v2/Merchant/"+n+"/checkoutForm",method:"post","accept-charset":"utf-8"}).appendTo(f),g.addInput(id.title,a.file,"hidden"),g.addInput(id.select,k[0].key,"hidden"),g.addInput(id.copies,1,"hidden"),g.addInput(id.price,k[0].val.split("+")[0],
"hidden"),g.addInput(id.currency,a.currency,"hidden"),null!=a.shipping&&b.isNumeric(a.shipping)&&(g.addInput(id.shipmethod,"normal","hidden"),g.addInput(id.shipprice,a.shipping,"hidden"),g.addInput(id.shipcurrency,a.currency,"hidden")),g.addInput("_charset_","","hidden"),g.append(b("<input>",{id:"shopAdd",type:"image",name:"Google Checkout",alt:"Fast checkout through Google",src:"http://checkout.google.com/buttons/checkout.gif?merchant_id="+n+"&w=160&h=43&style=trans&variant=text&loc=en_US",height:43,
width:160})));g.find("input[name=submit]").click(function(){window.open("",a.target,"width=840,height=600,scrollbars=yes,resizable=yes,menubar=no,toolbar=no,directories=no,status=no,copyhistory=no")})}})};b.fn.setupShop.defaults={target:"ShoppingCart",currency:"EUR",gateway:"paypal"};var H=function(a){if(null==a)return null;return"string"===typeof a?(a=/^(-?[\d.]+),\s?(-?[\d.]+)$/.exec(a),new google.maps.LatLng(a[1],a[2])):new google.maps.LatLng(a[0],a[1])};b.fn.setupMap=function(a){if(null==google.maps)return this;
var a=b.extend({},b.fn.setupMap.defaults,a),f=null==a.markerPath?{}:{icon:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(17,24),new google.maps.Point(0,0),new google.maps.Point(8,24)),shadow:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(28,24),new google.maps.Point(17,0),new google.maps.Point(8,24)),zIndex:9999},c=null==a.markerPath?{}:{icon:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(17,21),new google.maps.Point(45,3),new google.maps.Point(8,24)),
shadow:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(28,21),new google.maps.Point(62,3),new google.maps.Point(8,24))};return this.each(function(){var i=b(this),h,g,k,n;i.readData(a,"type,zoom,map,label,resPath,markers");n&&n.length&&n.remove();n=b("<div>").css({position:"absolute",top:"-9000px",width:i.width(),height:i.height()}).appendTo("body");i.data("fresh",!0).bind({adjust:function(){b(this).width()&&b(this).height()&&b(this).data("fresh")&&(google.maps.event.trigger(k,"resize"),
k.setCenter(h),b(this).data("fresh",!1))},destroy:function(){k.getParentNode().removeChild(k)}});if(a.markers&&a.markers.length&&null!=a.curr)h=a.markers[a.curr].map;else if(a.map)h=H(a.map),g=a.label;else return;setTimeout(function(){var m=new google.maps.Map(n[0],{zoom:a.zoom,center:h,mapTypeId:a.type.toLowerCase()});google.maps.event.addListener(m,"maptypeid_changed",function(){b.fn.setupMap.defaults.type=m.getMapTypeId()});google.maps.event.addListener(m,"zoom_changed",function(){b.fn.setupMap.defaults.zoom=
m.getZoom()});if(a.markers&&1<a.markers.length)for(var p,j,u=Math.min(a.curr+a.range,a.markers.length),w=Math.max(a.curr-a.range,0);w<u;w++)j=a.markers[w],p={position:j.map,map:m,title:j.label,zIndex:w},w==a.curr?p=new google.maps.Marker(b.extend(p,f)):(p=new google.maps.Marker(b.extend(p,c)),jQuery.isFunction(a.click)&&j.link&&(p.link=j.link,google.maps.event.addListener(p,"click",function(){a.click.call(this)})));else p=new google.maps.Marker(b.extend({position:h,map:m,title:g},f));n.css({top:0}).appendTo(i);
k=m},20)})};b.fn.setupMap.defaults={type:"roadmap",zoom:16,range:30};b.fn.markFoldersNew=function(a){a=b.extend({},b.fn.markFoldersNew.defaults,a);if(a.markNewDays){var f=Math.round((new Date).getTime()/864E5);return this.each(function(){f-parseInt(b(this).data("modified")||0)<=a.markNewDays&&b(this).after(a.newLabel)})}};b.fn.markFoldersNew.defaults={markNewDays:7,newLabel:"NEW"};b.fn.turtleGallery=function(a,f,c){var a=b.extend({},b.fn.turtleGallery.defaults,a),f=b.extend({},b.fn.turtleGallery.texts,
f),c=b.extend({},b.fn.turtleGallery.ids,c),i=a.skipIndex?b(a.helpgall.template(f.help)):b(a.help.template(f.help));if(!a.licensee&&location.protocol.startsWith("http")&&!x("ls")){var h=a.resPath+"/logo.png";setTimeout(function(){img=b(new Image);img.load(function(){var a=b("<div>").css({background:"url("+h+") 10px top no-repeat",textAlign:"left",minHeight:"60px",paddingLeft:"90px"});a.html("<h3>Turtle skin<h3></h3><p>Unlicensed</p>");a.popupBox();x("ls",!0)}).attr("src",h)},1E3)}for(var g="thumbsOn,infoOn,metaOn,mapOn,shopOn,shareOn,printOn,fitImage".split(","),
k=function(b,c){location.protocol.startsWith("file")||x(b,c);a[b]=c},m,j=0;j<g.length;j++)if(m=x(g[j]))a[g[j]]=m;b.support.touch&&(a.preScale=!1);b.fn.setupMap.defaults.zoom=a.mapZoom;b.fn.setupMap.defaults.type=a.mapType;b.fn.setupMap.defaults.markerPath=a.markerPath;b.fn.addPlayer.defaults.bgcolor=b("body").css("background-color").rgb2hex();b.fn.addPlayer.defaults.fit=a.videoFit;b.fn.addPlayer.defaults.auto=a.videoAuto;b.fn.centerThis.defaults.fit=a.fitImage;b.fn.centerThis.defaults.animate=a.transitions;
b.fn.centerThis.defaults.padding=a.fitPadding;b.fn.centerThis.defaults.enlarge=!a.fitShrinkonly;b.fn.centerThis.defaults.selector="."+c.main;for(j in a.shares)b.fn.shareIt.defaults[j]=a.shares[j];b.fn.shareIt.defaults.callTxt=f.checkOutThis;var p=function(b){var f=b.data(c.caption);return f?f.stripHTML():(b=b.closest("a"))?b.attr("href").replace(RegExp("^"+a.slides+"\\/"),""):""},v='<span class="'+c.newItem+'">'+f.newItem+"</span>",u=Math.round((new Date).getTime()/864E5);return this.each(function(){var h=
b(this).find("a"),g,m,j,n,r,x,y,E,J,K,L,F,M,ka,R,aa,G,S,T,Y,Z,z=null,B=null,A=0,N,la,ma=b(window).width(),na=b(window).height(),oa=[],Aa=function(c){if(document.activeElement&&"INPUT"===document.activeElement.nodeName||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard()||b("#modal:visible").length)return!0;c=c?c.keyCode:window.event.keyCode;if(112===c)i.alertBox({width:680});else if(g.is(":visible"))switch(c){case 106:case 179:N?P():V();break;case 109:a.infoOn||a.thumbsOn?(pa(),qa()):(ra(),sa());
break;case 107:a.fitImage?ta():ua();break;case 27:W();break;case 103:case 36:D(0);break;case 37:ba();break;case 39:Q();break;case 97:case 35:D(h.length-1);break;default:return!0}else switch(c){case 13:case 10:D();break;case 103:case 36:A=0;U();break;case 37:A=(A?A:h.length)-1;U();break;case 39:A=(A+1)%h.length;U();break;case 97:case 35:A=h.length-1;U();break;default:return!0}return!1},fa=function(){window.location.href=a.uplink||"../"},W=function(){var c=b("[role=main]");g.is(":visible")&&(P(),a.skipIndex?
fa():(c.length&&c.is(":hidden")&&(c.children().andSelf().css({visibility:"visible",display:"block"}),c.find(".folders>ul>li").equalHeight(),c.find("[role=scroll]").trigger("adjust")),a.transitions?g.fadeOut(a.speed):g.hide(),"no"!==a.hash&&b.history.load("")));c.find("[role=scroll]").data("dragOn",!1)},Ba=function(a){var b;if(null==a)b=A;else if("number"===typeof a)b=Math.minMax(0,a,h.length);else if(0>(b=h.index(a)))b=S.index(a);return b},Ca=function(a){var b,c;for(b=0;b<h.length;b++)if((c=h.eq(b).attr("href"))&&
c.substring(c.lastIndexOf("/")+1)===a)return b;return-1},va=function(){var a=h.eq(A).attr("href");return a&&a.substr(a.lastIndexOf("/")+1)},U=function(){h.filter("."+c.active).removeClass(c.active);h.eq(A).addClass(c.active);S.eq(A).trigger("setactive")},ba=function(){P();A?D(A-1):"startover"===a.afterLast?D(h.length-1):z.find("img."+c.main).trigger("dragcancel")},Q=function(){if(A<h.length-1)ga(),D(A+1);else if("startover"===a.afterLast||N&&a.slideshowLoop)ga(),D(0);else{if("onelevelup"===a.afterLast){if(a.uplink){fa();
return}}else if("backtoindex"===a.afterLast){if(!a.skipIndex){W();return}}else if("ask"===a.afterLast){P();var g=Array({t:f.startOver,h:function(){D(0)}});a.uplink&&g.push({t:0<a.level?f.upOneLevel:f.backToHome,h:function(){fa()}});a.skipIndex||g.push({t:f.backToIndex,h:function(){W()}});b("<h4>"+f.atLastPage+"</h4><p>"+f.atLastPageQuestion+"</p>").alertBox(g)}z.find("img."+c.main).trigger("dragcancel")}},ga=function(){N&&(clearInterval(N),N=setInterval(Q,a.slideshowDelay))},V=function(){x.hide();
y.showin();N=setInterval(Q,a.slideshowDelay)},P=function(){y.hide();x.showin();N=clearInterval(N)},wa=function(){Y||(n.stop(!0,!1).css({opacity:0.7}).fadeIn(500,function(){b.support.cssFilter&&n.css("filter","")}),Z=setTimeout(function(){ha()},3E3))},ha=function(){Y?Z=setTimeout(function(){ha()},1E3):(Z=clearTimeout(Z),n.fadeOut(1E3))},pa=function(){a.infoOn&&(E.hide(),J.showin(),a.transitions?r.animate({bottom:-r.outerHeight()},500,function(){r.hide()}):r.css({bottom:-r.outerHeight()}).hide(),k("infoOn",
!1))},ra=function(){if(!a.infoOn){J.hide();E.showin();r.is(":hidden")&&r.show().css({bottom:-r.outerHeight()});var b=function(){r.children("."+c.map).trigger("adjust")};a.transitions?r.animate({bottom:0},500,b):(r.show().css({bottom:0}),b());k("infoOn",!0)}},qa=function(){a.thumbsOn&&(K.hide(),L.showin(),a.transitions?j.animate({top:-G.outerHeight()-10},500):j.css({top:-G.outerHeight()-10}),z&&a.fitFreespace&&z.centerThis({fit:a.fitImage,marginTop:0}),k("thumbsOn",!1))},sa=function(){a.thumbsOn||
(L.hide(),K.showin(),a.transitions?j.animate({top:0},500):j.css({top:0}),z&&a.fitFreespace&&z.centerThis({fit:a.fitImage,marginTop:G.outerHeight()}),k("thumbsOn",!0))},X=function(){return a.fitFreespace&&0<=j.position().top?G.outerHeight()||0:0},ta=function(){F.hide();M.showin();z.centerThis({fit:!1,marginTop:X()});k("fitImage",!1)},ua=function(){M.hide();F.showin();z.centerThis({fit:!0,marginTop:X()});k("fitImage",!0)},xa=function(a){if(!(0>a||a>=h.length)){var f=h.eq(a).children("img").eq(0);!f.data(c.isvideo)&&
!f.data(c.isother)&&!f.data("cached")&&(s=f.data(c.src))&&b("<img>").load(function(){f.data("cached",!0)}).attr({src:s})}},ca=function(a){a.trigger("destroy");a.find("."+c.share+"-"+c.icon).trigger("destroy");a.find("."+c.map).trigger("destroy")},D=function(i){g.is(":hidden")&&(a.transitions?g.fadeIn(a.speed):g.show());i=Ba(i);if(!(i===A&&z)){var k,j=h.eq(i),p,n,j=j.children("img").eq(0);if(j.length){z&&(B&&B.length&&(B.stop(),ca(B),B.remove()),B=z,B.css({zIndex:0}),B.find("."+c.main).trigger("unswipe").off("touchstart"),
B.unmousewheel());(k=g.children("."+c.img).not(z)).length&&k.stop().remove();var r;z=b("<div>",{"class":c.img}).css({zIndex:1,display:"none"}).appendTo(g);m.css({opacity:0,display:"block"}).animate({opacity:1});A=i;U();if(j.data(c.isother)||!(p=j.data(c.src)))n=j.clone(),k=b("<div>",{"class":c.main+" "+c.other}),k.append(b("<a>",{href:j.data(c.link),target:"_blank"})),k.append(b("<p>",{text:f.clickToOpen})),k.children("a:first").append(n),ia(k);else if(j.data(c.isvideo)||j.data(c.isaudio)){var v=
N;v&&P();if(j.data(c.isvideo)){p=g.width()-40;var u=g.height()-40;k=j.data(c.width);r=j.data(c.height);if(k>p||r>u)p=Math.min(p/k,u/r),k*=p,r*=p}else k=Math.max(280,j.attr("width")||0),r=Math.max(128,j.attr("height")||0);p=b("<div>",{"class":c.main+" "+c.other}).css({width:k,height:r});el=p.addPlayer({complete:function(){v&&(Q(),V())},file:j.data(c.link),resPath:a.resPath,poster:j.attr("src"),auto:a.videoAuto,fit:a.videoFit,width:k,height:r});p.data("media",el);ia(p)}else n=b(new Image),k=j.data(c.width),
r=j.data(c.height),n.addClass(c.main).load(function(){j.data("cached",!0);ia(n)}).attr({src:p,width:k||"auto",height:r||"auto"}).data({ow:k,oh:r});Da(j,i)}}},ia=function(f){if(a.transitions){if(m.stop(!0,!1).animate({opacity:0},{duration:100,complete:function(){b(this).hide()}}),B){var h=B;B.stop(!0,!1).animate({opacity:0},{duration:a.speed/2,complete:function(){ca(h);h.remove()}});B=null}}else m.hide(),B&&(B.stop(),ca(B),B.remove());var g=f[0]&&"IMG"===f[0].nodeName;z.children().not("."+c.bottom).remove();
z.append(f);if(a.rightClickProtect)f.on("contextmenu",function(a){a.preventDefault();return!1});a.enableMouseWheel&&z.mousewheel(function(a,b){0<b?ba():Q();return!1});setTimeout(function(){if(b.support.touch)f.on("touchstart",function(){wa()});else g&&f.click(function(){Q()});f.swipe(function(){b(this).trigger("unswipe");Q()},function(){b(this).trigger("unswipe");ba()})},a.speed/2);a.transitions?z.css({opacity:0,display:"block"}).animate({opacity:1},{duration:a.speed,complete:b.browser.cssFilter?
function(){z.css({filter:""})}:null}).centerThis({init:!0,speed:Math.round(0.75*a.speed),marginTop:X(),preScale:g&&a.preScale,animate:g&&a.preScale&&1!=a.preScale,fit:g&&a.fitImage}):z.show().centerThis({init:!0,marginTop:X(),fit:g&&a.fitImage});xa(A+1);xa(A-1);if("number"===a.hash)b.history.load(A+1);else if("fileName"===a.hash){var i=va();i&&b.history.load(i)}},Da=function(g,i){r=b("<div>",{"class":c.bottom});var j=b("<div>",{"class":c.cont}).appendTo(r),m=b("<nav>").appendTo(j),n,v;j.append('<div class="nr"><strong>'+
(i+1)+"</strong> / "+h.length+"</div>");(n=g.data(c.caption))&&j.append(n);for(var u,x,y,B=[c.meta,c.map,c.shop,c.share,c.print,c.comment],C=0;C<B.length;C++)y=B[C],null!=g.data(y)&&(x=b("<div>",{"class":c.panel+" "+c[y]}).data("rel",y).appendTo(j),x.append(b("<div>",{"class":c.icon})),u=b("<a>",{href:NOLINK,"class":y+"-"+c.icon,text:" "}).appendTo(m),u.data("rel",y).addHint(f[y+"Btn"]||y),u.click(function(){var f=b(this).data("rel"),g=j.children("."+f);o=g.is(":hidden");b(this).toggleClass(c.active,
o);if(f===c.map){var h=function(){g.children("."+c.mapcont).trigger("adjust")};a.transitions?g.slideToggle("fast",h):(g.toggle(),setTimeout(h,50))}else a.transitions?g.slideToggle("fast"):g.toggle();k(f+"On",o)}));if(n=g.data(c.link))u=b("<a>",{href:n,"class":c.link+"-"+c.icon,target:"_blank",text:" "}).appendTo(m),u.addHint((g.data(c.isoriginal)?f.original:f.hiRes)+"<p><small>"+f.saveTip+"</small></p>");a.shareOn&&(u=b("<a>",{href:NOLINK,"class":c.share+"-"+c.icon,text:" "}).appendTo(m),v="number"===
a.hash?A+1:va(),setTimeout(function(){u.shareIt({hash:v})},a.speed));z.append(r);j.children("."+c.panel).each(function(){x=b(this);if((y=x.data("rel"))&&null!=(n=g.data(y))){if(y===c.map){var f=b("<div>",{"class":c.mapcont}).appendTo(x);a.mapAll?f.setupMap({click:function(){D(this.link)},markers:oa,curr:parseInt(g.data(c.mapid))}):f.setupMap({map:n,label:p(g)})}else y===c.shop?x.addClass("clearfix").setupShop({file:g.attr("src").replace("thumbs/",""),gateway:a.shopGateway,id:a.shopId,currency:a.shopCurrency,
handling:a.shopHandling,options:n}):x.append(n);a[y+"On"]?m.children("a."+y+"-icon").addClass(c.active):x.hide()}});m.html().length||m.remove();a.infoOn||r.hide()};if(h.length){(function(){if(null!=a.header){var g=b(a.header);if(g.length){var h=b("<div>",{"class":c.startBtn,text:" "}).appendTo(g),j=b("<div>",{"class":c.startTxt,text:f.startSlideshow}).appendTo(g);h.mouseenter(function(){j.stop(!0,!1).css({opacity:1}).hide().fadeIn(250)}).mouseleave(function(){j.stop(!0,!1).fadeOut(500)}).click(function(){D();
V();return!1});h=g.find("."+c.parent+">a");h.length&&(a.uplink=h.attr("href"));b("[role=main]").find("a."+c.help).click(function(){i.alertBox({width:680})})}}})();g=b("<div>",{"class":c.gallery}).appendTo("body");m=b("<div>",{"class":c.wait}).appendTo(g);j=b("<div>",{"class":c.navigation}).appendTo(g);G=function(f){var g,i,j,k,m=0;e=b("<div>",{"class":c.scrollbox}).appendTo(f);tc=b("<div>",{"class":"wrap"}).appendTo(e);re=RegExp("^"+a.slides+"\\/");d=Math.round((new Date).getTime()/864E5);tc=b("<ul>",
{"class":c.cont}).appendTo(tc);h.each(function(n){f=b(this);j=f.find("img").eq(0);k=f.attr("href");j.length&&k&&(g=b("<a>",{href:NOLINK}).appendTo(b("<li>").appendTo(tc)),i=b("<img>").appendTo(g),j.data(c.src,k),j.attr("src").endsWith("/"+a.loadImg)?j.add(i).attr("src",a.thumbs+"/"+k.replace(re,"")):i.attr("src",j.attr("src")),f.add(g).addHint(f.attr("title")),a.markNewDays&&u-parseInt(j.data(c.modified)||0)<=a.markNewDays&&f.add(g).append(v),f.click(function(){if(!0===b(this).parents("[role=scroll]").data("dragOn"))return!1;
!b(this).hasClass(c.active)&&z&&z.length&&(z.stop(),ca(z),z.remove());D(h.eq(n));return!1}),g.click(function(){if(!0===b(this).parents("[role=scroll]").data("dragOn"))return!1;b(this).hasClass(c.active)||D(h.eq(n));b(this).trigger("active");return!1}),m+=g.outerWidth(!0))});tc.width(m).scrollThumbs({enableMouseWheel:a.enableMouseWheel});return e}(j);S=G.find(".cont a");n=function(g){g=b("<nav>",{"class":"controls clearfix"}).appendTo(g);ka=b("<a>",{"class":c.prev,title:f.previousPicture}).appendTo(g);
ka.click(function(){P();ba();return!1});R=b("<a>",{"class":c.up,title:a.skipIndex?f.upOneLevel:f.backToIndex}).appendTo(g);R.click(function(){P();W();return!1});F=b("<a>",{"class":c.noresize,title:f.oneToOneSize}).appendTo(g);F.click(function(){ta();return!1});M=b("<a>",{"class":c.resize,title:f.fitToScreen}).appendTo(g);M.click(function(){ua();return!1});a.fitImage?(M.hide(),F.showin()):(F.hide(),M.showin());E=b("<a>",{"class":c.hideInfo,title:f.hideInfo}).appendTo(g);E.click(function(){pa();return!1});
J=b("<a>",{"class":c.showInfo,title:f.showInfo}).appendTo(g);J.click(function(){ra();return!1});a.infoOn?(J.hide(),E.showin()):(E.hide(),J.showin());K=b("<a>",{"class":c.hideThumbs,title:f.hideThumbs}).appendTo(g);K.click(function(){qa();return!1});L=b("<a>",{"class":c.showThumbs,title:f.showThumbs}).appendTo(g);L.click(function(){sa();return!1});a.thumbsOn?(L.hide(),K.showin()):(K.hide(),L.showin());x=b("<a>",{"class":c.play,title:f.startAutoplay}).appendTo(g);x.click(function(){V();return!1});y=
b("<a>",{"class":c.pause,title:f.stopAutoplay}).appendTo(g);y.click(function(){P();return!1});a.slideshowAuto?(x.hide(),y.showin()):(y.hide(),x.showin());aa=b("<a>",{"class":c.next,title:f.nextPicture}).appendTo(g);aa.click(function(){ga();Q();return!1});var h=0;g.children().each(function(){"none"!==b(this).css("display")&&(h+=b(this).outerWidth())});g.width(h);g.children("a").addHint();return g}(j);a.thumbsOn||j.css("top",-G.outerHeight()-10);G.mouseenter(function(){ha();T=!0}).mouseleave(function(){T=
!1});n.mouseenter(function(){Y=!0;b(this).stop(!0,!1).fadeTo(200,1)}).mouseleave(function(){Y=!1;b(this).stop(!0,!1).fadeTo(200,0.7)});var ya=0,za=0;b.support.touch||g.mousemove(function(a){if(!T&&(ya-a.clientY||za-a.clientX))wa(),za=a.clientX,ya=a.clientY});if(a.mapAll){var da,ea,ja;h.each(function(a){da=b(this).find("img:first");if(da.length&&(ea=da.data("map"))&&(ea=H(ea)))ja=p(da),oa.push({map:ea,label:a+1+(ja?": "+ja.stripHTML():""),link:b(this)})})}!b.support.touch&&(b.isFunction(a.enableKeyboard)||
a.enableKeyboard)&&b(document).keydown(Aa);a.hash&&"no"!==a.hash&&b.history.init(function(c){c&&c.length?(c="number"===a.hash?(parseInt(c)||1)-1:Ca(c),D(c),a.slideshowAuto=!1):(W(),b.browser.msie&&setTimeout(function(){b("[role=main]").show();b(".folders>ul>li").equalHeight();b("[role=scroll]").trigger("adjust")},10))});U(A);a.slideshowAuto?(D(A),V()):a.skipIndex&&D(A);b(window).resize(function(){clearTimeout(la);la=setTimeout(function(){var c=b(window).width(),f=b(window).height();if(c!==ma||f!==
na)z&&z.centerThis({fit:a.fitImage,marginTop:X()}),ma=c,na=f},100)})}})};b.fn.turtleGallery.defaults={hash:"fileName",resPath:"",relPath:"",level:0,skipIndex:!1,speed:600,transitions:!0,preScale:0.95,slideshowDelay:3E3,slideshowLoop:!1,slideshowAuto:!1,markNewDays:30,afterLast:"ask",infoOn:!0,thumbsOn:!1,fitImage:!0,fitShrinkonly:!0,fitFreespace:!0,fitPadding:15,borderWidth:10,rightClickProtect:!1,metaOn:!1,mapOn:!1,shopOn:!1,shareOn:!1,printOn:!1,enableKeyboard:!0,enableMouseWheel:!0,numberLinks:!1,
videoAuto:!0,videoFit:!0,videoWidth:640,videoHeight:480,controlbarHeight:24,help:'<h2>{0}</h2><ul class="help index"><li><span>1</span>{1}</li><li><span>2</span>{2}</li><li><span>3</span>{3}</li><li><span>4</span>{4}</li></ul><hr><ul class="help gall"><li><span>1</span>{5}</li><li><span>2</span>{6}</li><li><span>3</span>{7}</li><li><span>4</span>{8}</li><li><span>5</span>{9}</li><li><span>6</span>{10}</li><li><span>7</span>{11}</li></ul><p>{12}</p>',helpgall:'<h2>{0}</h2><ul class="help gall"><li><span>1</span>{5}</li><li><span>2</span>{1}</li><li><span>3</span>{7}</li><li><span>4</span>{8}</li><li><span>5</span>{9}</li><li><span>6</span>{10}</li><li><span>7</span>{11}</li></ul><p>{12}</p>'};
b.fn.turtleGallery.texts={startSlideshow:"Start slideshow",close:"Close",atLastPage:"At last page",atLastPageQuestion:"Where to go next?",startOver:"Start over",backToHome:"Back to home",stop:"Stop",upOneLevel:"Up one level",backToIndex:"Back to index page",previousPicture:"Previous picture",nextPicture:"Next picture",oneToOneSize:"1:1 size",fitToScreen:"Fit to screen",showInfo:"Show caption / info",hideInfo:"Hide caption / info",showThumbs:"Show thumbnails",hideThumbs:"Hide thumbnails",startAutoplay:"Start autoplay",
stopAutoplay:"Stop autoplay",closeWindow:"Close window",clickToOpen:"Click to open this document with the associated viewer",download:"Download",original:"Original",hiRes:"Hi res.",saveTip:"Use Right click -> Save link as... to download",metaBtn:"Photo data",metaLabel:"Display photograpic (Exif/Iptc) data",mapBtn:"Map",mapLabel:"Show the photo location on map",shopBtn:"Buy",shopLabel:"Show options to buy this item",shareBtn:"Share",shareLabel:"Share this photo over social sites",help:"Using Turtle gallery,Up one level <em>Up arrow</em>,Share album over social sites,Start slideshow <em>Numpad *</em>,Author / Company info,Previous image <em>Left arrow</em>,Back to index page <em>Esc</em>,Toggle zoom (fit/1:1) <em>Numpad +</em>,Toggle info window <em>Numpad -</em>,Toggle thumbnail scoller,Start / Stop slideshow <em>Numpad *</em>,Next image <em>Right arrow</em>,Swipe for previous / next image".split(",")};
b.fn.turtleGallery.ids={gallery:"gallery",navigation:"navigation",scrollbox:"scrollbox",active:"active",parent:"parent",bottom:"bottom",img:"img",main:"main",video:"video",audio:"audio",other:"other",wait:"wait",cont:"cont",panel:"panel",icon:"icon",caption:"caption",meta:"meta",map:"map",mapcont:"mapcont",mapid:"mapid",shop:"shop",share:"share",print:"print",comment:"comment",link:"link",isoriginal:"isoriginal",width:"width",height:"height",src:"src",isvideo:"isvideo",isaudio:"isaudio",isother:"isother",
modified:"modified",startBtn:"startbtn",startTxt:"starttxt",prev:"prev",next:"next",up:"up",noresize:"noresize",resize:"resize",hideInfo:"hideinfo",showInfo:"showinfo",hideThumbs:"hidethumbs",showThumbs:"showthumbs",play:"play",pause:"pause",help:"helpbtn",newItem:"newlabel",showHint:"showhint"}})(jQuery);
