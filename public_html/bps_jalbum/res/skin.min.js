/* 
	Turtle skin by Laszlo Molnar
	(C) 2011
*/
var DEBUG=!1,UNDEF="undefined",OBJECT="object",NOLINK="javascript:void(0)",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash";String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.startsWith=function(b){return 0===this.indexOf(b)};String.prototype.endsWith=function(b){return this.substring(this.length-b.length)===b};
String.prototype.getExt=function(){var b=this.lastIndexOf(".");return 0>=b||b>=this.length-1?"":this.substring(b+1).toLowerCase()};var htmlregex=[[/<br>/,"\n"],[/\&amp;/,"&"],[/\&lt;/,"<"],[/\&gt;/,">"],[/\&(m|n)dash;/,"-"],[/\&apos;/,"'"],[/\&quot;/,'"']];String.prototype.cleanupHTML=function(){for(var b=this,n=htmlregex.length-1;0<=n;n--)b=b.replace(new RegEx(htmlregex[n][0],"gi"),htmlregex[n][1]);return b};String.prototype.stripHTML=function(){return this.replace(/<\/?[^>]+>/gi,"")};
String.prototype.stripQuote=function(){return this.replace(/\"/gi,"&quot;")};String.prototype.appendSep=function(b,n){return(this.length?this+(n||" &middot; "):"")+b};String.prototype.rgb2hex=function(){if("#"===this.charAt(0))return this;for(var b,n=this.match(/\d+/g),r="",v=0;v<n.length&&3>v;v++)b=parseInt(n[v]).toString(16),r+=(2>b.length?"0":"")+b;return"#"+r};
String.prototype.template=function(b){if(!b)return this;for(var n=this,r=0;r<b.length;r++)n=n.replace(RegExp("\\{"+r+"\\}","gi"),b[r]);return n};Math.minMax=function(b,n,r){return $.isNumeric(n)?n<b?b:n>r?r:n:b};var _logel,_logover=!1,_lastlog,_lastcnt=1;
log=function(b){DEBUG&&!_logover&&(_logel||(_logel=$('<div id="log" style="position:fixed;left:0;top:0;width:200px;bottom:0;overflow:auto;padding:10px;background-color:rgba(0,0,0,0.5);color:#fff;font-size:15px;z-index:99999"></div>').hover(function(){_logover=!0},function(){_logover=!1}).appendTo("body")),b===_lastlog?_logel.children(":first").empty().html(_lastlog+" ("+ ++_lastcnt+")"):($('<div style="height:2em;overflow:hidden;">'+b+"</div>").prependTo(_logel),_lastlog=b,_lastcnt=1))};
checkFlash=function(b){var n=navigator,r=[1,0,0],v,b=b?b.split("."):[0,0,0];if(typeof n.plugins!=UNDEF&&typeof n.plugins[SHOCKWAVE_FLASH]==OBJECT){if((v=n.plugins[SHOCKWAVE_FLASH].description)&&!(typeof n.mimeTypes!=UNDEF&&n.mimeTypes[FLASH_MIME_TYPE]&&!n.mimeTypes[FLASH_MIME_TYPE].enabledPlugin))v=v.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),r[0]=parseInt(v.replace(/^(.*)\..*$/,"$1"),10),r[1]=parseInt(v.replace(/^.*\.(.*)\s.*$/,"$1"),10),r[2]=/[a-zA-Z]/.test(v)?parseInt(v.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),
10):0}else if(typeof window.ActiveXObject!=UNDEF)try{var y=new ActiveXObject(SHOCKWAVE_FLASH_AX);if(y&&typeof y.GetVariable!=UNDEF&&(v=y.GetVariable("$version")))v=v.split(" ")[1].split(","),r[0]=parseInt(v[0],10),r[1]=parseInt(v[1],10),r[2]=parseInt(v[2],10)}catch(fa){}return r[0]>b[0]||r[0]==b[0]&&r[1]>b[1]||r[0]==b[0]&&r[1]==b[1]&&r[2]>=b[2]};
(function(b){b.fn.logEvents=function(a){var f=a||"mousedown mouseup mouseover mouseout mousewheel dragstart click blur focus, load unload reset submit change abort cut copy paste selection drag drop orientationchange touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend";return this.each(function(){b(this).on(f,function(a){"log"!==a.target.id&&log(a.type+' <span style="padding:0 4px;font-size:0.8em;background-color:#000;border-radius:4px;"><b>'+a.target.nodeName.toLowerCase()+
"</b>"+(a.target.id?":"+a.target.id:"")+"</span>"+(a.relatedTarget?' <span style="padding:0 4px;font-size:0.8em;background-color:#800;border-radius:4px;"><b>'+a.relatedTarget.nodeName.toLowerCase()+"</b>"+(a.relatedTarget.id?":"+a.relatedTarget.id:"")+"</span>":""));return!0})})};b.fn.trackCss=function(a,f,c){var c=c||20,i=new Date;return this.each(function(){var h=b(this),g=function(a){var b=new Date-i;log(b+"&nbsp;::&nbsp;"+a+" = "+h.css(a));b>f&&clearInterval(k)},k=setInterval(function(){if(b.isArray(a))for(var c=
0;c<a.length;c++)g(a[c]);else g(a)},c)})};b.fn.readData=function(a,f){if(null==a||null==f)return this;var f=f.split(","),c,i=f.length,h;return this.each(function(){for(c=0;c<i;c++)if(null!=(h=b(this).data(f[c])))a[f[c]]=h})};b.extend(b.support,{orientation:"orientation"in window,touch:"ontouchend"in document,cssTransitions:"WebKitTransitionEvent"in window,cssTable:!b.browser.msie||8<=b.browser.version,cssFilter:b.browser.msie&&8>=b.browser.version,flash:checkFlash("9.0.0")});b.extend(jQuery.easing,
{easeOutBack:function(a,b,c,i,h,g){null==g&&(g=1.70158);return i*((b=b/h-1)*b*((g+1)*b+g)+1)+c},easeOutCubic:function(a,b,c,i,h){return i*((b=b/h-1)*b*b+1)+c}});b.fn.showin=function(){return this.each(function(){b(this).css("display","inline-block")})};b.fn.getDim=function(){var a=b(this).eq(0),f={width:a.width(),height:a.height()};if((0===f.width||0===f.height)&&"none"===a.css("display")){var c=a.css("position"),i=a.css("left");a.css({position:"absolute",left:"-10000px",display:"block"});f.width=
a.width();f.height=a.height();a.css({display:"none",position:c,left:i})}return f};var n=["DOMMouseScroll","mousewheel"];if(b.event.fixHooks)for(var r=n.length;r;)b.event.fixHooks[n[--r]]=b.event.mouseHooks;b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=n.length;a;)this.addEventListener(n[--a],v,!1);else this.onmousewheel=v},teardown:function(){if(this.removeEventListener)for(var a=n.length;a;)this.removeEventListener(n[--a],v,!1);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(a){return a?
this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}});var v=function(a){var f=a||window.event,c=[].slice.call(arguments,1),i=0,h=0,g=0,a=b.event.fix(f);a.type="mousewheel";f.wheelDelta?i=f.wheelDelta/120:f.detail&&(i=-f.detail/3);g=i;void 0!==f.axis&&f.axis===f.HORIZONTAL_AXIS&&(g=0,h=-1*i);void 0!==f.wheelDeltaY&&(g=f.wheelDeltaY/120);void 0!==f.wheelDeltaX&&(h=-1*f.wheelDeltaX/120);c.unshift(a,i,h,g);return(b.event.dispatch||b.event.handle).apply(this,
c)},y=function(a,b,c){if(1<arguments.length&&/^(string|number|boolean)$/.test(typeof b)){var i=new Date;i.setTime(i.getTime()+36E5*("number"!==typeof c?1:c));document.cookie=encodeURIComponent(a)+"="+(""+b)+"; expires="+i.toGMTString()+"; path=/";return b}if(a)for(var a=a+"=",i=document.cookie.split(";"),h,g=0;g<i.length;g++)if(h=i[g].trim(),0===h.indexOf(a))return h=h.substring(a.length),/^(true|yes)$/.test(h)?!0:/^(false|no)$/.test(h)?!1:/^([\d.]+)$/.test(h)?parseFloat(h):h;return null};(function(){function a(a){function c(a){var f=
RegExp(b.map(a,encodeURIComponent).join("|"),"ig");return function(a){return a.replace(f,decodeURIComponent)}}a=b.extend({unescape:!1},a||{});f.encoder=function(a){return!0===a?function(a){return a}:"string"==typeof a&&(a=c(a.split("")))||"function"==typeof a?function(b){return a(encodeURIComponent(b))}:encodeURIComponent}(a.unescape)}var f={put:function(a,b){(b||window).location.hash=this.encoder(a)},get:function(a){a=(a||window).location.hash.replace(/^#/,"");try{return b.browser.mozilla?a:decodeURIComponent(a)}catch(c){return a}},
encoder:encodeURIComponent},c={id:"__jQuery_history",init:function(){var a='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';b("body").prepend(a);return this},_document:function(){return b("#"+this.id)[0].contentWindow.document},put:function(a){var b=this._document();b.open();b.close();f.put(a,b)},get:function(){return f.get(this._document())}},i={base:{callback:void 0,type:void 0,check:function(){},load:function(){},init:function(b,c){a(c);h.callback=b;h._options=c;h._init()},
_init:function(){},_options:{}},timer:{_appState:void 0,_init:function(){var a=f.get();h._appState=a;h.callback(a);setInterval(h.check,100)},check:function(){var a=f.get();if(a!=h._appState)h._appState=a,h.callback(a)},load:function(a){if(a!=h._appState)f.put(a),h._appState=a,h.callback(a)}},iframeTimer:{_appState:void 0,_init:function(){var a=f.get();h._appState=a;c.init().put(a);h.callback(a);setInterval(h.check,100)},check:function(){var a=c.get(),b=f.get();if(b!=a)b==h._appState?(h._appState=
a,f.put(a),h.callback(a)):(h._appState=b,c.put(b),h.callback(b))},load:function(a){if(a!=h._appState)f.put(a),c.put(a),h._appState=a,h.callback(a)}},hashchangeEvent:{_init:function(){h.callback(f.get());b(window).on("hashchange",h.check)},check:function(){h.callback(f.get())},load:function(a){f.put(a)}}},h=b.extend({},i.base);h.type=b.browser.msie&&(8>b.browser.version||8>document.documentMode)?"iframeTimer":"onhashchange"in window?"hashchangeEvent":"timer";b.extend(h,i[h.type]);b.history=h})();b.fn.addScroll=
function(a){a=b.extend({},b.fn.addScroll.defaults,a);return this.each(function(){var f,c=b(this),i=b(this).parent(),h,g,k,j,m,u,p,C,w=0,D,M,n,S,r,v;c.css({position:"absolute",width:i.width-20});i.css({overflow:"hidden"});"absolute"!==i.css("position")&&i.css({position:"relative"});h=b("<div>",{"class":a.upbtn}).appendTo(i);g=b("<div>",{"class":a.dnbtn}).appendTo(i);k=b("<div>",{"class":a.scbar}).appendTo(i);j=b("<div>").appendTo(k);m=h.add(g).add(k);m.hide();var x=function(){return c.position().top},
F=function(a){return Math.round((k.height()-4)*-(null==a?x():a)/u)+2},I=function(){return Math.max(Math.round((k.height()-4)*p/u),a.dragMinSize)},J=function(b){null==b&&(b=x());h.css({opacity:b?1:a.disabledOpacity});g.css({opacity:b===p-u?a.disabledOpacity:1})},K=function(){u=c.height();p=i.height();u<=p?(c.css({top:0}),m.hide()):(c.position().top<p-u&&c.css({top:p-u}),j.css({top:F(),height:I()}),m.show(),J())},G=function(b){clearInterval(C);p>=u||(b=Math.minMax(p-u,b,0),j.stop(!0,!0).animate({top:F(b)},
a.speed,a.effect),c.stop(!0,!0).animate({top:b},a.speed,a.effect,function(){J(b)}))};h.click(function(){G(x()+p);return!1});g.click(function(){G(x()-p);return!1});k.click(function(a){a.pageY<j.offset().top?G(x()+p):a.pageY>j.offset().top+j.height()&&G(x()-p);return!1});a.enableMouseWheel&&c.mousewheel(function(b,c){c&&G(x()+a.wheelIncr*(0>c?-1:1));return!1});var L=function(a){j.css({top:Math.minMax(2,Math.round(a.pageY-j.data("my")),k.height()-j.height()-2)});c.css({top:Math.minMax(p-u,-Math.round((j.position().top-
2)*u/(k.height()-4)),0)});J();return!1},y=function(){b(document).off("mousemove",L).off("mouseup",y);return!1};j.on("mousedown",function(a){b(this).data("my",Math.round(a.pageY)-b(this).position().top);b(document).on({mousemove:L,mouseup:y});return!1});var Q=function(a){return w=a.touches&&0<a.touches.length?a.touches[0].clientY:a.clientY?a.clientY:w},Z=function(){r+=Math.round(S/20);var a=n+r;0<a||a<v?clearInterval(C):(c.css({top:a}),j.css({top:F(),height:I()}),S*=0.8,10>Math.abs(S)&&(S=0,clearInterval(C)))},
H=function(a){if(M){if(a=Q(a)-M)c.data("dragOn",!0),c.css({top:Math.minMax(v,D+a,0)}),j.css({top:F(),height:I()})}else M=Q(a);return!1},R=function(a){n=x();var a=Q(a)-M,f=(new Date).getTime()-tT;S=1E3*a/f;C=setInterval(Z,50);b.support.touch?this.ontouchend=this.ontouchmove=null:b(document).off({mousemove:H,mouseup:R});setTimeout(function(){c.data("dragOn",!1)},20);return 4>Math.abs(a)&&300>f},T=function(a){if(p>=u||("touchstart"===a.type||"touchmove"===a.type)&&(!a.touches||1<a.touches.length||c.is(":animated")))return!0;
clearInterval(C);te=a;D=x();M=Q(a);tT=(new Date).getTime();r=0;v=p-u;if(b.support.touch)return b(a.target).closest("a").focus(),this.ontouchmove=H,this.ontouchend=R,!0;b(document).on({mousemove:H,mouseup:R});return!1};if(b.support.touch)c[0].ontouchstart=T;else c.on("mousedown",T);b(window).resize(function(){clearTimeout(f);f=setTimeout(K,50)});m.add(c).on("selectstart",function(){return!1});f=setTimeout(K,10);c.attr("role","scroll").data("dragOn",!1).on("adjust",K);(b.isFunction(a.enableKeyboard)||
a.enableKeyboard)&&b(document).keydown(function(c){if("INPUT"===document.activeElement.nodeName||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard())return!0;switch(c?c.keyCode:window.event.keyCode){case 33:return G(x()+p),!1;case 34:return G(x()-p),!1}return!0})})};b.fn.addScroll.defaults={upbtn:"scrup",dnbtn:"scrdn",scbar:"scrbar",dragMinSize:10,speed:250,effect:"easeOutBack",disabledOpacity:0.3,wheelIncr:50,enableKeyboard:!0,enableMouseWheel:!0};b.fn.scrollThumbs=function(a){a=b.extend({},b.fn.scrollThumbs.defaults,
a);return this.each(function(){var f=b(this),c=b(this).parent(),i=0,h,g,k,j,m,u,p,C,w=b("<div>",{"class":a.scleft}).insertAfter(c),D=b("<div>",{"class":a.scright}).insertAfter(c),M=function(b){b=null==b?f.position().left:b;w.css({opacity:0>b?1:a.disabledOpacity});D.css({opacity:c.width()<b+f.width()?1:a.disabledOpacity})},n=function(h){var g=c.width(),i=f.width();g&&i&&!(g>=i)&&b.isNumeric(h)&&(0<h?h=0:h<g-i&&(h=g-i),M(h),f.stop(!0,!1).animate({left:h},a.speed,a.effect))};w.click(function(){n(f.position().left+
c.width());return!1});D.click(function(){n(f.position().left-c.width());return!1});f.find("a").on("setactive",function(){var h=b(this).parent()===f?b(this):b(this).parent(),g=h.position().left,h=h.outerWidth(!0),i=Math.round(h*a.headRoom),w=f.position().left,p=c.width();f.find("a.active").removeClass("active");b(this).addClass("active");if(!(p>f.width())){if(g>p-h-i-w)w=Math.max(p-h-i-g,p-f.width());else if(g<-w+i)w=-g+i;else return;n(w)}});a.enableMouseWheel&&f.mousewheel(function(a,b){b&&n(f.position().left+
c.width()*(0>b?-1:1));return!1});M();var r=function(a){return i=a.touches&&0<a.touches.length?a.touches[0].clientX:a.clientX?a.clientX:i},v=function(){u+=Math.round(m/20);var a=j+u;0<a||a<p?clearInterval(C):(f.css({left:a}),m*=0.8,10>Math.abs(m)&&(m=0,clearInterval(C)))},y=function(a){if(g){if(a=r(a)-g)f.data("dragOn",!0),f.css({left:Math.minMax(p,h+a,0)})}else g=r(a);return!1},x=function(a){j=f.position().left;var a=r(a)-g,c=(new Date).getTime()-k;m=1E3*a/c;C=setInterval(v,50);b.support.touch?this.ontouchend=
this.ontouchmove=null:b(document).off({mousemove:y,mouseup:x});setTimeout(function(){f.data("dragOn",!1)},20);return 4>Math.abs(a)&&300>c},F=function(a){if(("touchstart"===a.type||"touchmove"===a.type)&&(!a.touches||1<a.touches.length||f.is(":animated")))return!0;clearInterval(C);te=a;h=f.position().left;g=r(a);k=(new Date).getTime();u=0;p=c.width()-f.width();if(b.support.touch)return b(a.target).closest("a").focus(),this.ontouchmove=y,this.ontouchend=x,!0;b(document).on({mousemove:y,mouseup:x});
return!1};if(b.support.touch)f[0].ontouchstart=F;else f.on("mousedown",F);f.attr("role","scroll").data("dragOn",!1);f.add(w).add(D).on("selectstart",function(a){a.preventDefault();return!1})})};b.fn.scrollThumbs.defaults={scleft:"scleft",scright:"scright",speed:1500,incr:100,effect:"easeOutBack",headRoom:0.67,disabledOpacity:0.3,enableMouseWheel:!0};b.fn.swipe=function(a,f){return this.each(function(){var c=b(this),i=0,h=0,g=0,k,j,m,u=function(a){return i=a.touches&&0<a.touches.length?a.touches[0].clientX:
a.clientX?a.clientX:i},p=function(a){h?c.css({left:u(a)-h+k}):h=u(a);return!1},C=function(){return!1},w=function(i){g=c.position().left;i=u(i)-h;b.support.touch?this.ontouchend=this.ontouchmove=null:b(document).off("mousemove",p).off("mouseup click",w);40<Math.abs(i)?(m=1E3*i/((new Date).getTime()-j),c.animate({left:g+Math.round(m/2)},500,"easeOutCubic"),0>i?b.isFunction(a)&&a.call():b.isFunction(f)&&f.call()):(c.animate({left:k},200),c.trigger("click"));return!1},D=function(a){if(("touchstart"===
a.type||"touchmove"===a.type)&&(!a.touches||1<a.touches.length||c.is(":animated")))return!0;clearInterval(void 0);k=c.position().left;h=u(a);j=(new Date).getTime();if(b.support.touch)return this.ontouchmove=p,this.ontouchend=w,!0;c.off("click");c.click(C);b(document).on({mousemove:p,mouseup:w});a.cancelBubble=!0;return!1};if(b.support.touch)this.ontouchstart=D;else c.on("dragstart",D);c.on("dragcancel",function(){c.stop(!0,!1).animate({left:k},200);return!1});c.on("unswipe",function(){b.support.touch?
this.ontouchstart=this.ontouchend=this.ontouchmove=null:(b.isFunction(c.noClick)&&c.off(C),b.isFunction(c.dragStart)&&c.off(D),b(document).off("mousemove",p).off("mouseup",w))})})};b.fn.alignTo=function(a,f){f=b.extend({},b.fn.alignTo.defaults,f);return b(this).each(function(){var c=a.offset(),i=b(this).outerWidth(),h=b(this).outerHeight(),g=Math.round(c.left+f.toPos.h*a.outerWidth()/2+(f.toPos.h-1)*f.gap);ry=Math.round(c.top+f.toPos.v*a.outerHeight()/2+(f.toPos.v-1)*f.gap);l=Math.round(g-f.pos.h*
i/2);t=Math.round(ry-f.pos.v*h/2);0>t?2!==f.toPos.v&&(t=Math.round(c.top+a.outerHeight()+f.gap)):t+h>b(window).height()&&0!==f.toPos.v&&(t=Math.round(c.top-h-f.gap));0>l?2!==f.toPos.h&&(l=Math.round(c.left+a.outerWidth()+f.gap)):l+i>b(window).width()&&0!==f.topPos.h&&(l=Math.round(c.left-i-f.gap));b(this).css({position:"absolute",left:l,top:t})})};b.fn.alignTo.defaults={gap:5,pos:{h:1,v:2},toPos:{h:1,v:0}};b.fn.addHint=function(a,f){var f=b.extend({},b.fn.addHint.defaults,f),c=function(){var a=b("#"+
f.id);a.length||(a=b("<div>",{"class":f.id,id:f.id}).hide().appendTo("body"));return a};return this.each(function(){var i=b(this),h=a||i.attr("title"),g,k=!1,j=!(h&&h.jquery),m;if(h&&h.length){var u=function(){j?(m=c(),m.html(h)):m=h.show();m.hover(function(){g=clearTimeout(g);k=!0;m.stop(!0,!0).css({opacity:1}).show()},function(){g=clearTimeout(g);k=!1;C()});m.stop(!0,!1).alignTo(i).css({opacity:0}).show().animate({opacity:1},200);b.support.touch?g=setTimeout(C,f.stay):k=!0},p=function(){k=!1;g=
clearTimeout(g);C()},C=function(){!k&&m.length&&m.stop(!0,!1).animate({opacity:0},200,function(){b(this).hide()})};h.jquery?h.addClass(f.id):i.removeAttr("title");i.on(b.support.touch?{touchstart:u}:{"focus mouseenter":u,"blur mouseleave":p})}})};b.fn.addHint.defaults={id:"hint",stay:3E3};b.fn.popupBox=function(a){a=b.extend({},b.fn.popupBox.defaults,a);b("#"+a.id).remove();var f,c=b("<div>",{id:a.id}).appendTo("body"),i=b("<div>",{"class":"panel"}).appendTo(c);i.css({width:a.width}).append(this);
var h=function(){c.fadeOut(250,function(){b(this).remove()})};c.fadeIn(250,function(){f=setTimeout(h,a.length)});i.css({marginTop:Math.max(Math.round(0.4*(b(window).height()-i.outerHeight())),0)}).hover(function(){f=clearTimeout(f);b(this).stop(!0,!1).css("opacity",1)},function(){f=setTimeout(h,a.length)});return this};b.fn.popupBox.defaults={id:"modal",width:200,length:500};b.fn.alertBox=function(a,f){b.isArray(a)||(f=a,a=null);f=b.extend({},b.fn.alertBox.defaults,f);b("#"+f.id).remove();var c=b("<div>",
{id:f.id}).appendTo("body"),i=b("<div>",{"class":"panel"}).appendTo(c),h,g;i.append(this);i.append(b("<a>",{"class":"close",href:NOLINK,text:" "}).click(function(){j();return!1}));a&&(h=b("<div>",{"class":"buttons"}).appendTo(i));i.css({width:f.width});var k=function(a){if("input"===document.activeElement.nodeName||b.isFunction(f.enableKeyboard)&&!f.enableKeyboard())return!0;var c=a?a.keyCode:window.event.keyCode;if(27===a)j();else if(h){var a=h.find("a.active"),i=g.index(a);switch(c){case 13:case 10:if(b.isFunction(a[0].handler))return a[0].handler.call(),
j(),!1;case 39:return m((i+1)%g.length),!1;case 37:return m(i?i-1:g.length-1),!1}}return!0},j=function(){b(document).off("keydown",k);c.fadeOut(250,function(){b(this).remove()})},m=function(a){g.each(function(c){b(this).toggleClass("active",c===a)})};if(a&&a.length){for(var u,p=0;p<a.length;p++){p&&h.append(" ");u=b("<a>",{href:NOLINK}).appendTo(h);u.html(a[p].t);if(b.isFunction(a[p].h))u[0].handler=a[p].h;u.click(function(){null!=this.handler&&this.handler.call();j();return!1})}g=h.children("a");
g.last().addClass("active")}(b.isFunction(f.enableKeyboard)||f.enableKeyboard)&&b(document).keydown(k);c.fadeIn(250);i.css({marginTop:Math.max(Math.round(0.4*(b(window).height()-i.outerHeight())),0)});return this};b.fn.alertBox.defaults={id:"modal",width:420,enableKeyboard:!0};b.fn.equalHeight=function(){var a,f,c=0,i=0,h;return 2>(h=b(this).length)?this:this.each(function(g){a=b(this);a.offset().top===c?(f=f?f.add(a):a,i=Math.max(i,a.height()),g===h-1&&i&&f.height(i)):(f&&i&&f.height(i),f=a,i=a.height(),
c=a.offset().top)})};b.fn.shareIt=function(a){var a=b.extend({},b.fn.shareIt.defaults,a),f=encodeURIComponent(a.useHash?window.location.href:window.location.href.split("#")[0]),c=encodeURIComponent(b("meta[name=title]").attr("content")||b("title").text()),i=encodeURIComponent(a.callTxt);encodeURIComponent(b("link[rel=img_src]").attr("href"));return this.each(function(){var h=b(this);"a"===this.nodeName&&h.attr("href",NOLINK);var g=b("<div>",{"class":a.id}).hide();if(location.protocol.startsWith("file:")&&
!DEBUG)g.html(a.localWarning);else{a.facebookLike&&g.append('<div class="likebtn"><iframe src="http://www.facebook.com/plugins/like.php?href='+f+"&amp;layout=button_count&amp;show_faces=false&amp;width=110&amp;action=like&amp;font=arial&amp;colorscheme="+a.likeBtnTheme+'&amp;height=20" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:110px; height:20px;" allowTransparency="true"></iframe></div>');a.twitterTweet&&g.append('<div class="likebtn"><iframe allowtransparency="true" frameborder="0" scrolling="no" src="http://platform.twitter.com/widgets/tweet_button.html?url='+
f+"&text="+c+'" style="width:55px; height:20px;"></iframe></div>');if(a.googlePlus&&gapi&&!a.useHash){var k=b('<div class="g-plusone likebtn" data-size="medium" data-annotation="inline" data-href="'+f+'" data-width="110"></div>').appendTo(g);gapi.plusone.render(k[0])}a.tumblrBtn&&g.append('<div class="likebtn" id="tumblr"><a href="http://www.tumblr.com/share/photo?source='+f+"&caption="+c+'" title="Share on Tumblr" style="display:inline-block; text-indent:-9999px; overflow:hidden; width:81px; height:20px; background:url(http://platform.tumblr.com/v1/share_1.png) top left no-repeat transparent;">Tumblr</div>');
a.facebook&&g.append('<a href="http://www.facebook.com/sharer.php?u='+f+"&t="+c+'" class="facebook">Facebook</a>');a.twitter&&g.append('<a href="http://twitter.com/home?status='+i+": "+f+'" class="twitter">Twitter</a>');a.digg&&g.append('<a href="http://digg.com/submit?url='+f+'" class="digg">Digg</a>');a.delicious&&g.append('<a href="http://delicious.com/save?url='+f+"&title="+c+'&v=5" class="delicious">Delicious</a>');a.myspace&&g.append('<a href="http://www.myspace.com/index.cfm?fuseaction=postto&t='+
c+"&u="+f+'&l=3" class="myspace">MySpace</a>');a.stumbleupon&&g.append('<a href="http://www.stumbleupon.com/submit?url='+f+"&title="+c+'" class="stumbleupon">StumbleUpon</a>');a.reddit&&g.append('<a href="http://www.reddit.com/submit?url='+f+'" class="reddit">Reddit</a>');g.children("a").attr("target","_blank");a.email&&g.append('<a href="mailto:?subject='+i+"&body="+c+"%0D%0A"+f+'" class="email">Email</a>')}h.addHint(g.appendTo("body")).on("destroy",function(){g.remove()})})};b.fn.shareIt.defaults=
{id:"shares",useHash:!0,likeBtnTheme:"light",facebookLike:!0,twitterTweet:!0,googlePlus:!0,tumblrBtn:!0,facebook:!0,twitter:!0,digg:!0,delicious:!0,myspace:!0,stumbleupon:!0,reddit:!0,email:!0,callTxt:"Found this page",localWarning:"Can't share local albums. Please upload your album first!"};b.fn.addPlayer=function(a){var a=b.extend({},b.fn.addPlayer.defaults,a),f={flashVideo:".flv.3gp.3g2",video:".mp4.mov.f4v",html5Video:".ogv.webm",qtVideo:".qt.mpg.mpeg.mpe",wmVideo:".avi.wmv.asf.asx.wvx.mkv",audio:".mp3.aac.m4a",
html5audio:".ogg.wav.ram.rm"},c=0,i=a.resPath?a.resPath+"/":"",h=function(a){var b="",c;for(c in a)b+='<param name="'+c+'" value="'+a[c]+'">';return b},g=function(a){var c=b(a.target);c&&(b.browser.msie?(c.hide(),function(){if(4==c.readyState){if(c){for(var a in c)"function"===typeof c[a]&&(c[a]=null);c.remove()}}else setTimeout(arguments.callee,10)}()):c.remove())},k=function(f,g,w,k,m,u){var j="media"+c++,n=a.swf===b.fn.addPlayer.defaults.swf?24:0;f.addClass("flplayer").css({width:w,height:k+n});
g="netstreambasepath="+encodeURIComponent(window.location.href.split("#")[0])+"&id="+j+"&file="+encodeURIComponent(g)+"&image="+encodeURIComponent(m)+(u&&u.length?"&folder="+encodeURIComponent(u):"")+"&autostart="+a.auto+"&loop="+a.loop+"&screencolor="+encodeURIComponent(a.bgcolor)+"&controlbar.position=bottom";j='<object id="'+j+'" name="'+j+'" width="100%" height="100%" bgcolor="'+a.bgcolor+'" tabindex="0" ';j=b.browser.msie?j+'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">'+h({movie:i+a.swf}):
j+('type="application/x-shockwave-flash" data="'+i+a.swf+'">');j+=h({allowfullscreen:!0,allowscriptaccess:"always",seamlesstabbing:!0,wmode:"opaque",flashvars:g});return b(j).appendTo(f)},j=function(f,h,i,g){var k="em"+c++;f.addClass("emplayer");return b('<embed class="otherplayer" id="'+k+'" src="'+h+'" autostart="'+a.auto+'" loop="'+a.loop+'" width="'+i+'" height="'+g+'">').appendTo(f)},m=function(f,h,i,g,k,m){if((m=m!==UNDEF&&m)&&!Modernizr.audio||!m&&!Modernizr.video)return j(f,h,i,g);f.addClass("h5player").css({width:i,
height:g+n});var u="ht"+c++,n=30,f=b(m?"<audio>":"<video>",{id:u,src:h,width:i,height:g,controls:!0,preload:"auto",poster:k,autoplay:a.auto,loop:a.loop}).appendTo(f);if(b.isFunction(a.complete))f.on("ended",a.complete);return f},u=function(f,i,g,k){var m="wm"+c++;f.addClass("wmplayer").css({width:g,height:k+64});g='<object id="'+m+'" width="'+g+'" height="'+(k+64)+'" '+(b.browser.msie?'classid="CLSID:6BF52A52-394A-11D3-B153-00C04F79FAA6">':'type="application/x-ms-wmp" data="'+i+'">');g+=h({URL:i,
SendPlayStateChangeEvents:!0,AutoStart:a.auto,StretchToFit:a.fit});b.browser.msie||(g+="<a></a>");el=b(g).appendTo(f);if(b.isFunction(a.complete))el.on("playStateChange",function(){a.complete.call(this)});return el};return this.each(function(){var i=b(this),n=null;i.readData(a,"file,folder,width,height,poster");if(a.file){var w;a:{w=a.file.getExt();if(w.length)for(var D in f)if(0<=f[D].indexOf(w)){w=D;break a}w=null}switch(w){case "flashVideo":if(!b.support.flash){i.append(a.flashInstall);break}case "video":if(b.support.flash){n=
k(i,a.file,a.width,a.height,a.poster);break}case "html5Video":n=m(i,a.file,a.width,a.height,a.poster);break;case "qtVideo":n=a.file;w=a.width;D=a.height;var r="qt"+c++;i.addClass("qtplayer").css({width:w,height:D+16});w='<object id="'+r+'" width="'+w+'" height="'+(D+16)+'" '+(b.browser.msie?'classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0">':'type="video/quicktime" data="'+n+'">');w+=h({src:n,autoplay:a.auto,scale:a.fit?"tofit":
"1",enablejavascript:!0,postdomevents:!0});i=b(w).appendTo(i);if(b.isFunction(a.complete))i.on("qt_ended",a.complete);n=i;break;case "wmVideo":n=u(i,a.file,a.width,a.height);break;case "audio":if(b.support.flash){n=k(i,a.file,a.width,a.height,a.poster,a.folder);break}case "html5audio":n=m(i,a.file,a.width,a.height,a.poster,!0);break;default:n=j(i,a.file,a.width,a.height)}n.on("destroy",g)}})};b.fn.addPlayer.defaults={complete:null,swf:"player.swf",width:640,height:480,bgcolor:"#000000",auto:!1,loop:!1,
fit:!0,poster:"",folder:"",flashInstall:'<a href="http://get.adobe.com/flashplayer/">Get Adobe Flash Player!</a>'};b.fn.centerThis=function(a){a=b.extend({},b.fn.centerThis.defaults,a);return this.each(function(){var f=b(this),c=f.find(a.selector),i,h,g,k,j,m=a.marginLeft+a.padding;i=a.marginRight+a.padding;var u=a.marginTop+a.padding;k=a.marginBottom+a.padding;h=c.data("ow");g=c.data("oh");if(!h||!g)h=c.width(),g=c.height();(bw=c.data("bw"))||c.data("bw",bw=parseInt(c.css("border-top-width"))||0);
i=(f.width()||b("body").width())-2*bw-m-i;f=(f.height()||b("body").height())-2*bw-u-k;if("IMG"===c[0].nodeName&&a.fit&&(h>i||g>f||a.enlarge))k=Math.min(i/h,f/g),h=Math.round(h*k),g=Math.round(g*k);k=Math.round((i-h)/2)+m;j=Math.round((f-g)/2)+u;if(a.animate){if(a.preScale&&1!==a.preScale){var n=h*a.preScale,r=g*a.preScale;c.css({left:Math.round((i-n)/2)+m,top:Math.round((f-r)/2)+u,width:Math.round(n),height:Math.round(r)})}else a.init&&c.css({left:k,top:j});c.animate({left:k,top:j,width:h,height:g},
{duration:a.speed,easing:a.effect,complete:a.complete})}else c.css({left:k,top:j,width:h,height:g}),b.isFunction(a.complete)&&a.complete.call(this)})};b.fn.centerThis.defaults={selector:".main",speed:500,fit:!0,enlarge:!0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,padding:0,init:!1,animate:!1,effect:"swing",complete:null};b.fn.setupShop=function(a){var a=b.extend({},b.fn.setupShop.defaults,a),f;b.fn.addInput=function(a,c,f,k){var j;return this.each(function(){j=b("<input>",{type:f||"text"}).appendTo(b(this));
a&&(j.attr("name",a),j.addClass(a));c&&j.val(c);k&&j.prop(k,k)})};b.fn.addSelect=function(a,c,g){return!a.length?this:this.each(function(){var k=b(this),k=b("<select>").appendTo(k);for(f=0;f<a.length;f++)k.append(b("<option>",{val:a[f].val,text:a[f].key+" ("+c+" "+a[f].val+")"}));b.isFunction(g)&&k.change(g)})};var c=function(a){var a=a.split("::"),b,c=[];for(f=0;f<a.length;f++)b=a[f].split("="),1<b.length&&c.push({key:b[0],val:b[1]});return c};return this.each(function(){var f=b(this),h,g;f.readData(a,
"gateway,id,currency,handling,options,file");if(!(null==a.id||null==a.options||null==a.file)){id="paypal"==a.gateway?{form:"paypal",seller:"business",currency:"currency_code",title:"item_name",select:"item_number",price:"amount",copies:"add",shipprice:"shipping",handling:"handling_cart"}:{form:"google_checkout",currency:"item_currency_1",title:"item_name_1",select:"item_description_1",price:"item_price_1",copies:"item_quantity_1",shipmethod:"ship_method_name_1",shipprice:"ship_method_price_1",shipcurrency:"ship_method_currency_1"};
var k=c(a.options);a.id=a.id.replace("|","@");var j=function(){var a,b=h.children("select");h.length&&b.length&&(b=b.val().split("+"),q=h.children("[name=copies]").val()||1,(a=h.children("[name=total]"))&&a.val((b[0]*q).toFixed(2)),(a=g.children("[name="+id.price+"]"))&&a.val(b[0]),(a=g.children("[name="+id.copies+"]"))&&a.val(q),1<b.length&&(a=g.children("[name="+id.shipprice+"]"))&&a.val(b[1]),(a=g.children("[name="+id.select+"]"))&&a.val(h.find("option:selected").text()))};h=b("<form>",{name:"shopping",
method:"post"}).appendTo(f);h.addSelect(k,a.currency,j);h.append("x").addInput("copies",1);h.append("=").addInput("total",k[0].val.split("+")[0],"text","readonly");h.children("[name=copies]").css({width:"3em"}).change(j);h.children("[name=total]").css({width:"5em"});h.append(a.currency);"paypal"===a.gateway?(g=b("<form>",{name:id.form,target:a.target,action:"https://www.paypal.com/cgi-bin/webscr/",method:"post"}).appendTo(f),g.addInput("cmd","_cart","hidden"),g.addInput(id.copies,1,"hidden"),g.addInput(id.seller,
a.id,"hidden"),g.addInput(id.price,k[0].val.split("+")[0],"hidden"),g.addInput(id.currency,a.currency,"hidden"),null!=a.shipping&&b.isNumeric(a.shipping)&&g.addInput(id.shipprice,a.shipping,"hidden"),null!=a.handling&&b.isNumeric(a.handling)&&g.addInput(id.handling,a.handling,"hidden"),g.addInput(id.title,a.file,"hidden"),g.addInput(id.select,k[0].key,"hidden"),g.append(b("<input>",{id:"shopAdd",type:"image",name:"submit",src:"https://www.paypal.com/en_US/i/btn/btn_cart_SM.gif",alt:"Add to Cart"})),
f=b("<form>",{"class":"view",name:"paypalview",target:a.target,action:"https://www.paypal.com/cgi-bin/webscr/",method:"post"}).appendTo(f),f.addInput("cmd","_cart","hidden"),f.addInput("display",1,"hidden"),f.addInput(id.seller,a.business,"hidden"),f.append(b("<input>",{id:"shopView",type:"image",name:"submit",src:"https://www.paypal.com/en_US/i/btn/btn_viewcart_SM.gif",alt:"View Cart"}))):"google"===a.gateway&&(j=a.id.match(/(\d+)/)[0],g=b("<form>",{name:id.form,target:a.target,action:"https://checkout.google.com/cws/v2/Merchant/"+
j+"/checkoutForm",method:"post","accept-charset":"utf-8"}).appendTo(f),g.addInput(id.title,a.file,"hidden"),g.addInput(id.select,k[0].key,"hidden"),g.addInput(id.copies,1,"hidden"),g.addInput(id.price,k[0].val.split("+")[0],"hidden"),g.addInput(id.currency,a.currency,"hidden"),null!=a.shipping&&b.isNumeric(a.shipping)&&(g.addInput(id.shipmethod,"normal","hidden"),g.addInput(id.shipprice,a.shipping,"hidden"),g.addInput(id.shipcurrency,a.currency,"hidden")),g.addInput("_charset_","","hidden"),g.append(b("<input>",
{id:"shopAdd",type:"image",name:"Google Checkout",alt:"Fast checkout through Google",src:"http://checkout.google.com/buttons/checkout.gif?merchant_id="+j+"&w=160&h=43&style=trans&variant=text&loc=en_US",height:43,width:160})));g.find("input[name=submit]").click(function(){window.open("",a.target,"width=840,height=600,scrollbars=yes,resizable=yes,menubar=no,toolbar=no,directories=no,status=no,copyhistory=no")})}})};b.fn.setupShop.defaults={target:"ShoppingCart",currency:"EUR",gateway:"paypal"};var fa=
function(a){if(null==a)return null;return"string"===typeof a?(a=/^(-?[\d.]+),\s?(-?[\d.]+)$/.exec(a),new google.maps.LatLng(a[1],a[2])):new google.maps.LatLng(a[0],a[1])};b.fn.setupMap=function(a){if(null==google.maps)return this;var a=b.extend({},b.fn.setupMap.defaults,a),f=null==a.markerPath?{}:{icon:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(17,24),new google.maps.Point(0,0),new google.maps.Point(8,24)),shadow:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(28,
24),new google.maps.Point(17,0),new google.maps.Point(8,24)),zIndex:9999},c=null==a.markerPath?{}:{icon:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(17,21),new google.maps.Point(45,3),new google.maps.Point(8,24)),shadow:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(28,21),new google.maps.Point(62,3),new google.maps.Point(8,24))};return this.each(function(){var i=b(this),h,g,k,j;i.readData(a,"type,zoom,map,label,resPath,markers");j&&j.length&&j.remove();j=b("<div>").css({position:"absolute",
top:"-9000px",width:i.width(),height:i.height()}).appendTo("body");i.data("fresh",!0).bind({adjust:function(){b(this).width()&&b(this).height()&&b(this).data("fresh")&&(google.maps.event.trigger(k,"resize"),k.setCenter(h),b(this).data("fresh",!1))},destroy:function(){k.getParentNode().removeChild(k)}});if(a.markers&&a.markers.length&&null!=a.curr)h=a.markers[a.curr].map;else if(a.map)h=fa(a.map),g=a.label;else return;setTimeout(function(){var m=new google.maps.Map(j[0],{zoom:a.zoom,center:h,mapTypeId:a.type.toLowerCase()});
google.maps.event.addListener(m,"maptypeid_changed",function(){b.fn.setupMap.defaults.type=m.getMapTypeId()});google.maps.event.addListener(m,"zoom_changed",function(){b.fn.setupMap.defaults.zoom=m.getZoom()});if(a.markers&&1<a.markers.length)for(var n,p,r=Math.min(a.curr+a.range,a.markers.length),w=Math.max(a.curr-a.range,0);w<r;w++)if(p=a.markers[w],n={position:p.map,map:m,title:p.label,zIndex:w},w==a.curr)n=new google.maps.Marker(b.extend(n,f));else{if(n=new google.maps.Marker(b.extend(n,c)),jQuery.isFunction(a.click)&&
p.link)n.link=p.link,google.maps.event.addListener(n,"click",function(){a.click.call(this)})}else n=new google.maps.Marker(b.extend({position:h,map:m,title:g},f));j.css({top:0}).appendTo(i);k=m},20)})};b.fn.setupMap.defaults={type:"roadmap",zoom:16,range:30};b.fn.turtleGallery=function(a,f,c){var a=b.extend({},b.fn.turtleGallery.defaults,a),f=b.extend({},b.fn.turtleGallery.texts,f),c=b.extend({},b.fn.turtleGallery.ids,c),i=a.skipIndex?b(a.helpgall.template(f.help)):b(a.help.template(f.help));if(!a.licensee&&
location.protocol.startsWith("http")&&!y("ls")){var h=a.resPath+"/logo.png";setTimeout(function(){img=b(new Image);img.load(function(){var a=b("<div>").css({background:"url("+h+") 10px top no-repeat",textAlign:"left",minHeight:"60px",paddingLeft:"90px"});a.html("<h3>Turtle skin<h3></h3><p>Unlicensed</p>");a.popupBox();y("ls",!0)}).attr("src",h)},1E3)}for(var g="thumbsOn,infoOn,metaOn,mapOn,shopOn,shareOn,printOn,fitImage".split(","),k=function(b,c){location.protocol.startsWith("file")||y(b,c);a[b]=
c},n,m=0;m<g.length;m++)if(n=y(g[m]))a[g[m]]=n;if(b.support.touch)a.preScale=!1;b.fn.setupMap.defaults.zoom=a.mapZoom;b.fn.setupMap.defaults.type=a.mapType;b.fn.setupMap.defaults.markerPath=a.markerPath;b.fn.addPlayer.defaults.bgcolor=b("body").css("background-color").rgb2hex();b.fn.addPlayer.defaults.fit=a.videoFit;b.fn.addPlayer.defaults.auto=a.videoAuto;b.fn.centerThis.defaults.fit=a.fitImage;b.fn.centerThis.defaults.animate=a.transitions;b.fn.centerThis.defaults.padding=a.fitPadding;b.fn.centerThis.defaults.enlarge=
!a.fitShrinkonly;b.fn.centerThis.defaults.selector="."+c.main;for(m in a.shares)b.fn.shareIt.defaults[m]=a.shares[m];b.fn.shareIt.defaults.callTxt=f.checkOutThis;var u=function(b){var f=b.data(c.caption);return f?f.stripHTML():(b=b.closest("a"))?b.attr("href").replace(RegExp("^"+a.slides+"\\/"),""):""},p='<span class="'+c.newItem+'">'+f.newItem+"</span>",r=Math.round((new Date).getTime()/864E5);return this.each(function(){var h=b(this).find("a"),g,n,j,m,v,y,x,F,I,J,K,G,L,ka,Q,Z,H,R,T,X,Y,z=null,B=
null,A=0,N,la,ma=b(window).width(),na=b(window).height(),oa=[],Aa=function(c){if("INPUT"===document.activeElement.nodeName||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard()||b("#modal:visible").length)return!0;c=c?c.keyCode:window.event.keyCode;if(112===c)i.alertBox({width:680});else if(g.is(":visible"))switch(c){case 106:case 179:N?O():V();break;case 109:a.infoOn||a.thumbsOn?(pa(),qa()):(ra(),sa());break;case 107:a.fitImage?ta():ua();break;case 27:aa();break;case 103:case 36:E(0);break;case 37:ba();
break;case 39:P();break;case 97:case 35:E(h.length-1);break;default:return!0}else switch(c){case 13:case 10:E();break;case 103:case 36:A=0;U();break;case 37:A=(A?A:h.length)-1;U();break;case 39:A=(A+1)%h.length;U();break;case 97:case 35:A=h.length-1;U();break;default:return!0}return!1},aa=function(){var c=b("[role=main]");if(g.is(":visible"))O(),a.skipIndex?window.location.href=a.uplink||"../":(c.length&&c.is(":hidden")&&(c.children().andSelf().css({visibility:"visible",display:"block"}),c.find(".folders>ul>li").equalHeight(),
c.find("[role=scroll]").trigger("adjust")),a.transitions?g.fadeOut(a.speed):g.hide(),"no"!==a.hash&&b.history.load(""));c.find("[role=scroll]").data("dragOn",!1)},Ba=function(a){var b;if(null==a)b=A;else if("number"===typeof a)b=Math.minMax(0,a,h.length);else if(0>(b=h.index(a)))b=R.index(a);return b},Ca=function(a){var b,c;for(b=0;b<h.length;b++)if((c=h.eq(b).attr("href"))&&c.substring(c.lastIndexOf("/")+1)===a)return b;return-1},va=function(){var a=h.eq(A).attr("href");return a&&a.substr(a.lastIndexOf("/")+
1)},U=function(){h.filter("."+c.active).removeClass(c.active);h.eq(A).addClass(c.active);R.eq(A).trigger("setactive")},ba=function(){O();A?E(A-1):a.slideshowLoop?E(h.length-1):z.find("img."+c.main).trigger("dragcancel")},P=function(){if(A<h.length-1)ga(),E(A+1);else if(a.slideshowLoop)ga(),E(0);else if(a.askAtLast){O();z.find("img."+c.main).trigger("dragcancel");var g=Array({t:f.startOver,h:function(){E(0)}});a.uplink&&g.push({t:0<a.level?f.upOneLevel:f.backToHome,h:function(){window.location.href=
a.uplink||"../"}});a.skipIndex||g.push({t:f.backToIndex,h:function(){aa()}});b("<h4>"+f.atLastPage+"</h4><p>"+f.atLastPageQuestion+"</p>").alertBox(g)}},ga=function(){N&&(clearInterval(N),N=setInterval(P,a.slideshowDelay))},V=function(){y.hide();x.showin();N=setInterval(P,a.slideshowDelay)},O=function(){x.hide();y.showin();N=clearInterval(N)},wa=function(){X||(m.stop(!0,!1).css({opacity:0.7}).fadeIn(500,function(){b.support.cssFilter&&m.css("filter","")}),Y=setTimeout(function(){ha()},3E3))},ha=function(){X?
Y=setTimeout(function(){ha()},1E3):(Y=clearTimeout(Y),m.fadeOut(1E3))},pa=function(){a.infoOn&&(F.hide(),I.showin(),a.transitions?v.animate({bottom:-v.outerHeight()},500,function(){v.hide()}):v.css({bottom:-v.outerHeight()}).hide(),k("infoOn",!1))},ra=function(){if(!a.infoOn){I.hide();F.showin();v.is(":hidden")&&v.show().css({bottom:-v.outerHeight()});var b=function(){v.children("."+c.map).trigger("adjust")};a.transitions?v.animate({bottom:0},500,b):(v.show().css({bottom:0}),b());k("infoOn",!0)}},
qa=function(){a.thumbsOn&&(J.hide(),K.showin(),a.transitions?j.animate({top:-H.outerHeight()-10},500):j.css({top:-H.outerHeight()-10}),z&&a.fitFreespace&&z.centerThis({fit:a.fitImage,marginTop:0}),k("thumbsOn",!1))},sa=function(){a.thumbsOn||(K.hide(),J.showin(),a.transitions?j.animate({top:0},500):j.css({top:0}),z&&a.fitFreespace&&z.centerThis({fit:a.fitImage,marginTop:H.outerHeight()}),k("thumbsOn",!0))},W=function(){return a.fitFreespace&&0<=j.position().top?H.outerHeight()||0:0},ta=function(){G.hide();
L.showin();z.centerThis({fit:!1,marginTop:W()});k("fitImage",!1)},ua=function(){L.hide();G.showin();z.centerThis({fit:!0,marginTop:W()});k("fitImage",!0)},xa=function(a){if(!(0>a||a>=h.length)){var f=h.eq(a).children("img").eq(0);!f.data(c.isvideo)&&!f.data(c.isother)&&!f.data("cached")&&(s=f.data(c.src))&&b("<img>").load(function(){f.data("cached",!0)}).attr({src:s})}},ca=function(a){a.trigger("destroy");a.find("."+c.share+"-"+c.icon).trigger("destroy");a.find("."+c.map).trigger("destroy")},E=function(i){g.is(":hidden")&&
(a.transitions?g.fadeIn(a.speed):g.show());i=Ba(i);if(!(i===A&&z)){var k,j=h.eq(i),m,p,j=j.children("img").eq(0);if(j.length){z&&(B&&B.length&&(B.stop(),ca(B),B.remove()),B=z,B.css({zIndex:0}),B.find("."+c.main).trigger("unswipe").off("touchstart"),B.unmousewheel());(k=g.children("."+c.img).not(z)).length&&k.stop().remove();var r;z=b("<div>",{"class":c.img}).css({zIndex:1,display:"none"}).appendTo(g);n.css({opacity:0,display:"block"}).animate({opacity:1});A=i;U();if(j.data(c.isother)||!(m=j.data(c.src)))p=
j.clone(),k=b("<div>",{"class":c.main+" "+c.other}),k.append(b("<a>",{href:j.data(c.link),target:"_blank"})),k.append(b("<p>",{text:f.clickToOpen})),k.children("a:first").append(p),ia(k);else if(j.data(c.isvideo)||j.data(c.isaudio)){var u=N;u&&O();if(j.data(c.isvideo)){m=g.width()-40;var v=g.height()-40;k=j.data(c.width);r=j.data(c.height);if(k>m||r>v)m=Math.min(m/k,v/r),k*=m,r*=m}else k=Math.max(280,j.attr("width")||0),r=Math.max(128,j.attr("height")||0);m=b("<div>",{"class":c.main+" "+c.other}).css({width:k,
height:r});el=m.addPlayer({complete:function(){u&&(P(),V())},file:j.data(c.link),resPath:a.resPath,poster:j.attr("src"),auto:a.videoAuto,fit:a.videoFit,width:k,height:r});m.data("media",el);ia(m)}else p=b(new Image),k=j.data(c.width),r=j.data(c.height),p.addClass(c.main).load(function(){j.data("cached",!0);ia(p)}).attr({src:m,width:k||"auto",height:r||"auto"}).data({ow:k,oh:r});Da(j,i)}}},ia=function(f){if(a.transitions){if(n.stop(!0,!1).animate({opacity:0},{duration:100,complete:function(){b(this).hide()}}),
B){var h=B;B.stop(!0,!1).animate({opacity:0},{duration:a.speed/2,complete:function(){ca(h);h.remove()}});B=null}}else n.hide(),B&&(B.stop(),ca(B),B.remove());var g="IMG"===f[0].nodeName;z.children().not("."+c.bottom).remove();z.append(f);if(a.rightClickProtect)f.on("contextmenu",function(a){a.preventDefault();return!1});a.enableMouseWheel&&z.mousewheel(function(a,b){0<b?ba():P();return!1});setTimeout(function(){if(b.support.touch)f.on("touchstart",function(){wa()});else g&&f.click(function(){P()});
f.swipe(function(){b(this).trigger("unswipe");P()},function(){b(this).trigger("unswipe");ba()})},a.speed/2);a.transitions?z.css({opacity:0,display:"block"}).animate({opacity:1},{duration:a.speed,complete:b.browser.cssFilter?function(){z.css({filter:""})}:null}).centerThis({init:!0,speed:Math.round(0.75*a.speed),marginTop:W(),preScale:g&&a.preScale,animate:g&&a.preScale&&1!=a.preScale,fit:g&&a.fitImage}):z.show().centerThis({init:!0,marginTop:W(),fit:g&&a.fitImage});xa(A+1);xa(A-1);if("number"===a.hash)b.history.load(A+
1);else if("fileName"===a.hash){var i=va();i&&b.history.load(i)}},Da=function(g,i){v=b("<div>",{"class":c.bottom});var j=b("<div>",{"class":c.cont}).appendTo(v),m=b("<nav>").appendTo(j),n,r;j.append('<div class="nr"><strong>'+(i+1)+"</strong> / "+h.length+"</div>");(n=g.data(c.caption))&&j.append(n);for(var p,y,x,C=[c.meta,c.map,c.shop,c.share,c.print,c.comment],B=0;B<C.length;B++)x=C[B],null!=g.data(x)&&(y=b("<div>",{"class":c.panel+" "+c[x]}).data("rel",x).appendTo(j),y.append(b("<div>",{"class":c.icon})),
p=b("<a>",{href:NOLINK,"class":x+"-"+c.icon,text:" "}).appendTo(m),p.data("rel",x).addHint(f[x+"Btn"]||x),p.click(function(){var f=b(this).data("rel"),g=j.children("."+f);o=g.is(":hidden");b(this).toggleClass(c.active,o);if(f===c.map){var h=function(){g.children("."+c.mapcont).trigger("adjust")};a.transitions?g.slideToggle("fast",h):(g.toggle(),setTimeout(h,50))}else a.transitions?g.slideToggle("fast"):g.toggle();k(f+"On",o)}));if(n=g.data(c.link))p=b("<a>",{href:n,"class":c.link+"-"+c.icon,target:"_blank",
text:" "}).appendTo(m),p.addHint((g.data(c.isoriginal)?f.original:f.hiRes)+"<p><small>"+f.saveTip+"</small></p>");a.shareOn&&(p=b("<a>",{href:NOLINK,"class":c.share+"-"+c.icon,text:" "}).appendTo(m),r="number"===a.hash?A+1:va(),setTimeout(function(){p.shareIt({hash:r})},a.speed));z.append(v);j.children("."+c.panel).each(function(){y=b(this);if((x=y.data("rel"))&&null!=(n=g.data(x))){if(x===c.map){var f=b("<div>",{"class":c.mapcont}).appendTo(y);a.mapAll?f.setupMap({click:function(){E(this.link)},
markers:oa,curr:parseInt(g.data(c.mapid))}):f.setupMap({map:n,label:u(g)})}else x===c.shop?y.addClass("clearfix").setupShop({file:g.attr("src").replace("thumbs/",""),gateway:a.shopGateway,id:a.shopId,currency:a.shopCurrency,handling:a.shopHandling,options:n}):y.append(n);a[x+"On"]?m.children("a."+x+"-icon").addClass(c.active):y.hide()}});m.html().length||m.remove();a.infoOn||v.hide()};if(h.length){(function(){if(null!=a.header){var g=b(a.header);if(g.length){var h=b("<div>",{"class":c.startBtn,text:" "}).appendTo(g),
j=b("<div>",{"class":c.startTxt,text:f.startSlideshow}).appendTo(g);h.mouseenter(function(){j.stop(!0,!1).css({opacity:1}).hide().fadeIn(250)}).mouseleave(function(){j.stop(!0,!1).fadeOut(500)}).click(function(){E();V();return!1});h=g.find("."+c.parent+">a");if(h.length)a.uplink=h.attr("href");b("[role=main]").find("a."+c.help).click(function(){i.alertBox({width:680})})}}})();a.markNewDays&&b("[role=main] .folders aside img").each(function(){r-parseInt(b(this).data(c.modified)||0)<=a.markNewDays&&
b(this).after(p)});g=b("<div>",{"class":c.gallery}).appendTo("body");n=b("<div>",{"class":c.wait}).appendTo(g);j=b("<div>",{"class":c.navigation}).appendTo(g);H=function(f){var g,i,j,k,m=0;e=b("<div>",{"class":c.scrollbox}).appendTo(f);tc=b("<div>",{"class":"wrap"}).appendTo(e);re=RegExp("^"+a.slides+"\\/");d=Math.round((new Date).getTime()/864E5);tc=b("<ul>",{"class":c.cont}).appendTo(tc);h.each(function(n){f=b(this);j=f.find("img").eq(0);k=f.attr("href");j.length&&k&&(g=b("<a>",{href:NOLINK}).appendTo(b("<li>").appendTo(tc)),
i=b("<img>").appendTo(g),j.data(c.src,k),j.attr("src").endsWith("/"+a.loadImg)?j.add(i).attr("src",a.thumbs+"/"+k.replace(re,"")):i.attr("src",j.attr("src")),f.add(g).addHint(f.attr("title")),a.markNewDays&&r-parseInt(j.data(c.modified)||0)<=a.markNewDays&&f.add(g).append(p),f.click(function(){if(!0===b(this).parents("[role=scroll]").data("dragOn"))return!1;!b(this).hasClass(c.active)&&z&&z.length&&(z.stop(),ca(z),z.remove());E(h.eq(n));return!1}),g.click(function(){if(!0===b(this).parents("[role=scroll]").data("dragOn"))return!1;
b(this).hasClass(c.active)||E(h.eq(n));b(this).trigger("active");return!1}),m+=g.outerWidth(!0))});tc.width(m).scrollThumbs({enableMouseWheel:a.enableMouseWheel});return e}(j);R=H.find(".cont a");m=function(g){g=b("<nav>",{"class":"controls clearfix"}).appendTo(g);ka=b("<a>",{"class":c.prev,title:f.previousPicture}).appendTo(g);ka.click(function(){O();ba();return!1});Q=b("<a>",{"class":c.up,title:a.skipIndex?f.upOneLevel:f.backToIndex}).appendTo(g);Q.click(function(){O();aa();return!1});G=b("<a>",
{"class":c.noresize,title:f.oneToOneSize}).appendTo(g);G.click(function(){ta();return!1});L=b("<a>",{"class":c.resize,title:f.fitToScreen}).appendTo(g);L.click(function(){ua();return!1});a.fitImage?(L.hide(),G.showin()):(G.hide(),L.showin());F=b("<a>",{"class":c.hideInfo,title:f.hideInfo}).appendTo(g);F.click(function(){pa();return!1});I=b("<a>",{"class":c.showInfo,title:f.showInfo}).appendTo(g);I.click(function(){ra();return!1});a.infoOn?(I.hide(),F.showin()):(F.hide(),I.showin());J=b("<a>",{"class":c.hideThumbs,
title:f.hideThumbs}).appendTo(g);J.click(function(){qa();return!1});K=b("<a>",{"class":c.showThumbs,title:f.showThumbs}).appendTo(g);K.click(function(){sa();return!1});a.thumbsOn?(K.hide(),J.showin()):(J.hide(),K.showin());y=b("<a>",{"class":c.play,title:f.startAutoplay}).appendTo(g);y.click(function(){V();return!1});x=b("<a>",{"class":c.pause,title:f.stopAutoplay}).appendTo(g);x.click(function(){O();return!1});a.slideshowAuto?(y.hide(),x.showin()):(x.hide(),y.showin());Z=b("<a>",{"class":c.next,
title:f.nextPicture}).appendTo(g);Z.click(function(){ga();P();return!1});var h=0;g.children().each(function(){"none"!==b(this).css("display")&&(h+=b(this).outerWidth())});g.width(h);g.children("a").addHint();return g}(j);a.thumbsOn||j.css("top",-H.outerHeight()-10);H.mouseenter(function(){ha();T=!0}).mouseleave(function(){T=!1});m.mouseenter(function(){X=!0;b(this).stop(!0,!1).fadeTo(200,1)}).mouseleave(function(){X=!1;b(this).stop(!0,!1).fadeTo(200,0.7)});var ya=0,za=0;b.support.touch||g.mousemove(function(a){if(!T&&
(ya-a.clientY||za-a.clientX))wa(),za=a.clientX,ya=a.clientY});if(a.mapAll){var da,ea,ja;h.each(function(a){da=b(this).find("img:first");if(da.length&&(ea=da.data("map"))&&(ea=fa(ea)))ja=u(da),oa.push({map:ea,label:a+1+(ja?": "+ja.stripHTML():""),link:b(this)})})}!b.support.touch&&(b.isFunction(a.enableKeyboard)||a.enableKeyboard)&&b(document).keydown(Aa);a.hash&&"no"!==a.hash&&b.history.init(function(c){c&&c.length?(c="number"===a.hash?(parseInt(c)||1)-1:Ca(c),E(c),a.slideshowAuto=!1):(aa(),b.browser.msie&&
setTimeout(function(){b("[role=main]").show();b(".folders>ul>li").equalHeight();b("[role=scroll]").trigger("adjust")},10))});U(A);a.slideshowAuto?(E(A),V()):a.skipIndex&&E(A);b(window).resize(function(){clearTimeout(la);la=setTimeout(function(){var c=b(window).width(),f=b(window).height();if(c!==ma||f!==na)z&&z.centerThis({fit:a.fitImage,marginTop:W()}),ma=c,na=f},100)})}})};b.fn.turtleGallery.defaults={hash:"fileName",resPath:"",relPath:"",level:0,skipIndex:!1,speed:600,transitions:!0,preScale:0.95,
slideshowDelay:3E3,slideshowLoop:!1,slideshowAuto:!1,markNewDays:30,askAtLast:!0,infoOn:!0,thumbsOn:!1,fitImage:!0,fitShrinkonly:!0,fitFreespace:!0,fitPadding:15,borderWidth:10,rightClickProtect:!1,metaOn:!1,mapOn:!1,shopOn:!1,shareOn:!1,printOn:!1,enableKeyboard:!0,enableMouseWheel:!0,numberLinks:!1,videoAuto:!0,videoFit:!0,videoWidth:640,videoHeight:480,controlbarHeight:24,help:'<h2>{0}</h2><ul class="help index"><li><span>1</span>{1}</li><li><span>2</span>{2}</li><li><span>3</span>{3}</li><li><span>4</span>{4}</li></ul><hr><ul class="help gall"><li><span>1</span>{5}</li><li><span>2</span>{6}</li><li><span>3</span>{7}</li><li><span>4</span>{8}</li><li><span>5</span>{9}</li><li><span>6</span>{10}</li><li><span>7</span>{11}</li></ul><p>{12}</p>',
helpgall:'<h2>{0}</h2><ul class="help gall"><li><span>1</span>{5}</li><li><span>2</span>{1}</li><li><span>3</span>{7}</li><li><span>4</span>{8}</li><li><span>5</span>{9}</li><li><span>6</span>{10}</li><li><span>7</span>{11}</li></ul><p>{12}</p>'};b.fn.turtleGallery.texts={startSlideshow:"Start slideshow",close:"Close",atLastPage:"At last page",atLastPageQuestion:"Where to go next?",startOver:"Start over",backToHome:"Back to home",stop:"Stop",upOneLevel:"Up one level",backToIndex:"Back to index page",
previousPicture:"Previous picture",nextPicture:"Next picture",oneToOneSize:"1:1 size",fitToScreen:"Fit to screen",showInfo:"Show caption / info",hideInfo:"Hide caption / info",showThumbs:"Show thumbnails",hideThumbs:"Hide thumbnails",startAutoplay:"Start autoplay",stopAutoplay:"Stop autoplay",closeWindow:"Close window",clickToOpen:"Click to open this document with the associated viewer",download:"Download",original:"Original",hiRes:"Hi res.",saveTip:"Use Right click -> Save link as... to download",
metaBtn:"Photo data",metaLabel:"Display photograpic (Exif/Iptc) data",mapBtn:"Map",mapLabel:"Show the photo location on map",shopBtn:"Buy",shopLabel:"Show options to buy this item",shareBtn:"Share",shareLabel:"Share this photo over social sites",help:"Using Turtle gallery,Up one level <em>Up arrow</em>,Share album over social sites,Start slideshow <em>Numpad *</em>,Author / Company info,Previous image <em>Left arrow</em>,Back to index page <em>Esc</em>,Toggle zoom (fit/1:1) <em>Numpad +</em>,Toggle info window <em>Numpad -</em>,Toggle thumbnail scoller,Start / Stop slideshow <em>Numpad *</em>,Next image <em>Right arrow</em>,Swipe for previous / next image".split(",")};
b.fn.turtleGallery.ids={gallery:"gallery",navigation:"navigation",scrollbox:"scrollbox",active:"active",parent:"parent",bottom:"bottom",img:"img",main:"main",video:"video",audio:"audio",other:"other",wait:"wait",cont:"cont",panel:"panel",icon:"icon",caption:"caption",meta:"meta",map:"map",mapcont:"mapcont",mapid:"mapid",shop:"shop",share:"share",print:"print",comment:"comment",link:"link",isoriginal:"isoriginal",width:"width",height:"height",src:"src",isvideo:"isvideo",isaudio:"isaudio",isother:"isother",
modified:"modified",startBtn:"startbtn",startTxt:"starttxt",prev:"prev",next:"next",up:"up",noresize:"noresize",resize:"resize",hideInfo:"hideinfo",showInfo:"showinfo",hideThumbs:"hidethumbs",showThumbs:"showthumbs",play:"play",pause:"pause",help:"helpbtn",newItem:"newlabel",showHint:"showhint"}})(jQuery);
